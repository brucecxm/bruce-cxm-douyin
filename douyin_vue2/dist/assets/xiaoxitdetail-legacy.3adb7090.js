!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}System.register(["./index-legacy.d81978a6.js","./token-legacy.294ea389.js"],(function(e,n){"use strict";var r,o,s,i,a=document.createElement("style");return a.textContent=".chat-container[data-v-db7b52ac]{display:flex;flex-direction:column;height:100vh;background:#f7f7f7}.header[data-v-db7b52ac]{background-color:#fff;padding:10px 20px;text-align:center;font-size:18px;font-weight:700;box-shadow:0 2px 5px rgba(0,0,0,.1)}.chat-box[data-v-db7b52ac]{flex:1;padding:10px;overflow-y:auto;background:#ffffff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin:10px}#chat[data-v-db7b52ac]{list-style:none;padding:0}.chat-message[data-v-db7b52ac]{margin-bottom:15px;font-size:16px;word-wrap:break-word;line-height:1.5;border-radius:20px;padding:10px 15px;max-width:70%}.user-message[data-v-db7b52ac]{background-color:#dcf8c6;align-self:flex-start;border-top-left-radius:0;border-bottom-left-radius:0}.friend-message[data-v-db7b52ac]{background-color:#fff;border:1px solid #ccc;align-self:flex-end;border-top-right-radius:0;border-bottom-right-radius:0}.join-message[data-v-db7b52ac]{font-style:italic;color:#888;text-align:center;padding:5px}.message-input[data-v-db7b52ac]{display:flex;padding:10px;background-color:#fff;box-shadow:0 -2px 5px rgba(0,0,0,.1);position:sticky;bottom:0;z-index:1000}.input-field[data-v-db7b52ac]{flex:1;padding:12px;border-radius:20px;border:1px solid #ccc;font-size:16px;background-color:#f1f1f1;margin-right:10px}.send-btn[data-v-db7b52ac]{background-color:#4caf50;color:#fff;border:none;border-radius:20px;padding:12px 15px;font-size:16px;cursor:pointer}.send-btn[data-v-db7b52ac]:hover{background-color:#45a049}input[data-v-db7b52ac]:focus,button[data-v-db7b52ac]:focus{outline:none}\n",document.head.appendChild(a),{setters:[function(t){r=t.c,o=t.a,s=t.n},function(t){i=t.u}],execute:function(){var n={exports:{}},a={};r.crypto&&r.crypto.getRandomValues?a.randomBytes=function(t){var e=new Uint8Array(t);return r.crypto.getRandomValues(e),e}:a.randomBytes=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=Math.floor(256*Math.random());return e};var c=a,u="abcdefghijklmnopqrstuvwxyz012345",l={string:function(t){for(var e=c.randomBytes(t),n=[],r=0;r<t;r++)n.push(u.substr(e[r]%32,1));return n.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length;return(new Array(e+1).join("0")+this.number(t)).slice(-e)}};!function(t){var e=l,n={},o=!1,s=r.chrome&&r.chrome.app&&r.chrome.app.runtime;t.exports={attachEvent:function(t,e){void 0!==r.addEventListener?r.addEventListener(t,e,!1):r.document&&r.attachEvent&&(r.document.attachEvent("on"+t,e),r.attachEvent("on"+t,e))},detachEvent:function(t,e){void 0!==r.addEventListener?r.removeEventListener(t,e,!1):r.document&&r.detachEvent&&(r.document.detachEvent("on"+t,e),r.detachEvent("on"+t,e))},unloadAdd:function(t){if(s)return null;var r=e.string(8);return n[r]=t,o&&setTimeout(this.triggerUnloadCallbacks,0),r},unloadDel:function(t){t in n&&delete n[t]},triggerUnloadCallbacks:function(){for(var t in n)n[t](),delete n[t]}};s||t.exports.attachEvent("unload",(function(){o||(o=!0,t.exports.triggerUnloadCallbacks())}))}(n);var h={},p=Object.prototype.hasOwnProperty;function d(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function f(t){try{return encodeURIComponent(t)}catch(e){return null}}h.stringify=function(t,e){e=e||"";var n,r,o=[];for(r in"string"!=typeof e&&(e="?"),t)if(p.call(t,r)){if((n=t[r])||null!=n&&!isNaN(n)||(n=""),r=f(r),n=f(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?e+o.join("&"):""},h.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,r={};e=n.exec(t);){var o=d(e[1]),s=d(e[2]);null===o||null===s||o in r||(r[o]=s)}return r};var m=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},b=h,v=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,g=/[\n\r\t]/g,y=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,w=/:\d+$/,x=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,C=/^[a-zA-Z]:/;function _(t){return(t||"").toString().replace(v,"")}var E=[["#","hash"],["?","query"],function(t,e){return k(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],S={hash:1,query:1};function O(e){var n,o=("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).location||{},s={},i=t(e=e||o);if("blob:"===e.protocol)s=new N(unescape(e.pathname),{});else if("string"===i)for(n in s=new N(e,{}),S)delete s[n];else if("object"===i){for(n in e)n in S||(s[n]=e[n]);void 0===s.slashes&&(s.slashes=y.test(e.href))}return s}function k(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function T(t,e){t=(t=_(t)).replace(g,""),e=e||{};var n,r=x.exec(t),o=r[1]?r[1].toLowerCase():"",s=!!r[2],i=!!r[3],a=0;return s?i?(n=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(n=r[2]+r[4],a=r[2].length):i?(n=r[3]+r[4],a=r[3].length):n=r[4],"file:"===o?a>=2&&(n=n.slice(2)):k(o)?n=r[4]:o?s&&(n=n.slice(2)):a>=2&&k(e.protocol)&&(n=r[4]),{protocol:o,slashes:s||k(o),slashesCount:a,rest:n}}function N(e,n,r){if(e=(e=_(e)).replace(g,""),!(this instanceof N))return new N(e,n,r);var o,s,i,a,c,u,l=E.slice(),h=t(n),p=this,d=0;for("object"!==h&&"string"!==h&&(r=n,n=null),r&&"function"!=typeof r&&(r=b.parse),o=!(s=T(e||"",n=O(n))).protocol&&!s.slashes,p.slashes=s.slashes||o&&n.slashes,p.protocol=s.protocol||n.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||C.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!k(p.protocol)))&&(l[3]=[/(.*)/,"pathname"]);d<l.length;d++)"function"!=typeof(a=l[d])?(i=a[0],u=a[1],i!=i?p[u]=e:"string"==typeof i?~(c="@"===i?e.lastIndexOf(i):e.indexOf(i))&&("number"==typeof a[2]?(p[u]=e.slice(0,c),e=e.slice(c+a[2])):(p[u]=e.slice(c),e=e.slice(0,c))):(c=i.exec(e))&&(p[u]=c[1],e=e.slice(0,c.index)),p[u]=p[u]||o&&a[3]&&n[u]||"",a[4]&&(p[u]=p[u].toLowerCase())):e=a(e,p);r&&(p.query=r(p.query)),o&&n.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==n.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],s=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(s=!0),n.splice(r,1),i--);return s&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(p.pathname,n.pathname)),"/"!==p.pathname.charAt(0)&&k(p.protocol)&&(p.pathname="/"+p.pathname),m(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(~(c=p.auth.indexOf(":"))?(p.username=p.auth.slice(0,c),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=p.auth.slice(c+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(p.auth)),p.auth=p.password?p.username+":"+p.password:p.username),p.origin="file:"!==p.protocol&&k(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString()}N.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||b.parse)(e)),r[t]=e;break;case"port":r[t]=e,m(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,w.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";r[t]=e.charAt(0)!==o?o+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(r.username=e.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var i=0;i<E.length;i++){var a=E[i];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&k(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=b.stringify);var n,r=this,o=r.host,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var i=s+(r.protocol&&r.slashes||k(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&k(r.protocol)&&!o&&"/"!==r.pathname&&(i+="@"),(":"===o[o.length-1]||w.test(r.hostname)&&!r.port)&&(o+=":"),i+=o+r.pathname,(n="object"===t(r.query)?e(r.query):r.query)&&(i+="?"!==n.charAt(0)?"?"+n:n),r.hash&&(i+=r.hash),i}},N.extractProtocol=T,N.location=O,N.trimLeft=_,N.qs=b;var j,I,F=N,A={exports:{}};function L(){if(I)return j;I=1;var e=1e3,n=60*e,r=60*n,o=24*r,s=7*o,i=365.25*o;function a(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}return j=function(c,u){u=u||{};var l=t(c);if("string"===l&&c.length>0)return function(t){if((t=String(t)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(c);if("number"===l&&isFinite(c))return u.long?function(t){var s=Math.abs(t);if(s>=o)return a(t,s,o,"day");if(s>=r)return a(t,s,r,"hour");if(s>=n)return a(t,s,n,"minute");if(s>=e)return a(t,s,e,"second");return t+" ms"}(c):function(t){var s=Math.abs(t);if(s>=o)return Math.round(t/o)+"d";if(s>=r)return Math.round(t/r)+"h";if(s>=n)return Math.round(t/n)+"m";if(s>=e)return Math.round(t/e)+"s";return t+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}}var R=function(t){function e(t){for(var e=0,r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){var s;function i(){if(i.enabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=i,a=Number(new Date),c=a-(s||a);o.diff=c,o.prev=s,o.curr=a,s=a,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var u=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,r){if("%%"===t)return t;u++;var s=n.formatters[r];if("function"==typeof s){var i=e[u];t=s.call(o,i),e.splice(u,1),u--}return t})),n.formatArgs.call(o,e),(o.log||n.log).apply(o,e)}}return i.namespace=t,i.enabled=n.enabled(t),i.useColors=n.useColors(),i.color=e(t),i.destroy=r,i.extend=o,"function"==typeof n.init&&n.init(i),n.instances.push(i),i}function r(){var t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){return n(this.namespace+(void 0===e?":":e)+t)}return n.debug=n,n.default=n,n.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},n.disable=function(){n.enable("")},n.enable=function(t){var e;n.save(t),n.names=[],n.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(e=0;e<o;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){var s=n.instances[e];s.enabled=n.enabled(s.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=L(),Object.keys(t).forEach((function(e){n[e]=t[e]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n};!function(e,n){function r(e){return r="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},r(e)}n.log=function(){var t;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(t=console).log.apply(t,arguments)},n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))})),t.splice(o,0,n)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var t;try{t=n.storage.getItem("debug")}catch(e){}!t&&"undefined"!=typeof process&&"env"in process&&(t={}.DEBUG);return t},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=R(n),e.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(A,A.exports);var P=F,U=function(){};U=A.exports("sockjs-client:utils:url");var M={getOrigin:function(t){if(!t)return null;var e=new P(t);if("file:"===e.protocol)return null;var n=e.port;return n||(n="https:"===e.protocol?"443":"80"),e.protocol+"//"+e.hostname+":"+n},isOriginEqual:function(t,e){var n=this.getOrigin(t)===this.getOrigin(e);return U("same",t,e,n),n},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var n=t.split("?");return n[0]+e+(n[1]?"?"+n[1]:"")},addQuery:function(t,e){return t+(-1===t.indexOf("?")?"?"+e:"&"+e)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},W={exports:{}};"function"==typeof Object.create?W.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:W.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}};var D={};function J(){this._listeners={}}J.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},J.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);-1===r||(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t])}},J.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,n),e in this._listeners)for(var r=this._listeners[e],o=0;o<r.length;o++)r[o].apply(this,n)};var B=J,q=W.exports,G=B;function z(){G.call(this)}q(z,G),z.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},z.prototype.once=function(t,e){var n=this,r=!1;this.on(t,(function o(){n.removeListener(t,o),r||(r=!0,e.apply(this,arguments))}))},z.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var s=0;s<e.length;s++)e[s].apply(this,r)}},z.prototype.on=z.prototype.addListener=G.prototype.addEventListener,z.prototype.removeListener=G.prototype.removeEventListener,D.EventEmitter=z;var H={exports:{}},V=r.WebSocket||r.MozWebSocket;H.exports=V?function(t){return new V(t)}:void 0;var $=n.exports,X=M,Q=W.exports,K=D.EventEmitter,Z=H.exports,Y=function(){};function tt(t,e,n){if(!tt.enabled())throw new Error("Transport created when disabled");K.call(this),Y("constructor",t);var r=this,o=X.addPath(t,"/websocket");o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),this.url=o,this.ws=new Z(this.url,[],n),this.ws.onmessage=function(t){Y("message event",t.data),r.emit("message",t.data)},this.unloadRef=$.unloadAdd((function(){Y("unload"),r.ws.close()})),this.ws.onclose=function(t){Y("close event",t.code,t.reason),r.emit("close",t.code,t.reason),r._cleanup()},this.ws.onerror=function(t){Y("error event",t),r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}Y=A.exports("sockjs-client:websocket"),Q(tt,K),tt.prototype.send=function(t){var e="["+t+"]";Y("send",e),this.ws.send(e)},tt.prototype.close=function(){Y("close");var t=this.ws;this._cleanup(),t&&t.close()},tt.prototype._cleanup=function(){Y("_cleanup");var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),$.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},tt.enabled=function(){return Y("enabled"),!!Z},tt.transportName="websocket",tt.roundTrips=2;var et=tt,nt=W.exports,rt=D.EventEmitter,ot=function(){};function st(t,e){ot(t),rt.call(this),this.sendBuffer=[],this.sender=e,this.url=t}ot=A.exports("sockjs-client:buffered-sender"),nt(st,rt),st.prototype.send=function(t){ot("send",t),this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},st.prototype.sendScheduleWait=function(){ot("sendScheduleWait");var t,e=this;this.sendStop=function(){ot("sendStop"),e.sendStop=null,clearTimeout(t)},t=setTimeout((function(){ot("timeout"),e.sendStop=null,e.sendSchedule()}),25)},st.prototype.sendSchedule=function(){ot("sendSchedule",this.sendBuffer.length);var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,(function(e){t.sendStop=null,e?(ot("error",e),t.emit("close",e.code||1006,"Sending error: "+e),t.close()):t.sendScheduleWait()})),this.sendBuffer=[]}},st.prototype._cleanup=function(){ot("_cleanup"),this.removeAllListeners()},st.prototype.close=function(){ot("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var it=st,at=W.exports,ct=D.EventEmitter,ut=function(){};function lt(t,e,n){ut(e),ct.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}ut=A.exports("sockjs-client:polling"),at(lt,ct),lt.prototype._scheduleReceiver=function(){ut("_scheduleReceiver");var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",(function(e){ut("message",e),t.emit("message",e)})),e.once("close",(function(n,r){ut("close",n,r,t.pollIsClosing),t.poll=e=null,t.pollIsClosing||("network"===r?t._scheduleReceiver():(t.emit("close",n||1006,r),t.removeAllListeners()))}))},lt.prototype.abort=function(){ut("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var ht=lt,pt=W.exports,dt=M,ft=it,mt=ht,bt=function(){};function vt(t,e,n,r,o){var s=dt.addPath(t,e);bt(s);var i=this;ft.call(this,t,n),this.poll=new mt(r,s,o),this.poll.on("message",(function(t){bt("poll message",t),i.emit("message",t)})),this.poll.once("close",(function(t,e){bt("poll close",t,e),i.poll=null,i.emit("close",t,e),i.close()}))}bt=A.exports("sockjs-client:sender-receiver"),pt(vt,ft),vt.prototype.close=function(){ft.prototype.close.call(this),bt("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var gt=vt,yt=W.exports,wt=M,xt=gt,Ct=function(){};function _t(t,e,n,r){xt.call(this,t,e,function(t){return function(e,n,r){Ct("create ajax sender",e,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var s=wt.addPath(e,"/xhr_send"),i=new t("POST",s,n,o);return i.once("finish",(function(t){if(Ct("finish",t),i=null,200!==t&&204!==t)return r(new Error("http status "+t));r()})),function(){Ct("abort"),i.close(),i=null;var t=new Error("Aborted");t.code=1e3,r(t)}}}(r),n,r)}Ct=A.exports("sockjs-client:ajax-based"),yt(_t,xt);var Et=_t,St=W.exports,Ot=D.EventEmitter,kt=function(){};function Tt(t,e){kt(t),Ot.call(this);var n=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(t,e){kt("finish",t,e),n._chunkHandler(t,e),n.xo=null;var r=200===t?"network":"permanent";kt("close",r),n.emit("close",null,r),n._cleanup()}))}kt=A.exports("sockjs-client:receiver:xhr"),St(Tt,Ot),Tt.prototype._chunkHandler=function(t,e){if(kt("_chunkHandler",t),200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var r=e.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&(kt("message",o),this.emit("message",o))}},Tt.prototype._cleanup=function(){kt("_cleanup"),this.removeAllListeners()},Tt.prototype.abort=function(){kt("abort"),this.xo&&(this.xo.close(),kt("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var Nt=Tt,jt=D.EventEmitter,It=W.exports,Ft=n.exports,At=M,Lt=r.XMLHttpRequest,Rt=function(){};function Pt(t,e,n,r){Rt(t,e);var o=this;jt.call(this),setTimeout((function(){o._start(t,e,n,r)}),0)}Rt=A.exports("sockjs-client:browser:xhr"),It(Pt,jt),Pt.prototype._start=function(t,e,n,r){var o=this;try{this.xhr=new Lt}catch(i){}if(!this.xhr)return Rt("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();e=At.addQuery(e,"t="+ +new Date),this.unloadRef=Ft.unloadAdd((function(){Rt("unload cleanup"),o._cleanup(!0)}));try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){Rt("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch(a){return Rt("exception",a),this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!Pt.supportsCORS||(Rt("withCredentials"),this.xhr.withCredentials=!0),r&&r.headers)for(var s in r.headers)this.xhr.setRequestHeader(s,r.headers[s]);this.xhr.onreadystatechange=function(){if(o.xhr){var t,e,n=o.xhr;switch(Rt("readyState",n.readyState),n.readyState){case 3:try{e=n.status,t=n.responseText}catch(a){}Rt("status",e),1223===e&&(e=204),200===e&&t&&t.length>0&&(Rt("chunk"),o.emit("chunk",e,t));break;case 4:e=n.status,Rt("status",e),1223===e&&(e=204),12005!==e&&12029!==e||(e=0),Rt("finish",e,n.responseText),o.emit("finish",e,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(a){o.emit("finish",0,""),o._cleanup(!1)}},Pt.prototype._cleanup=function(t){if(Rt("cleanup"),this.xhr){if(this.removeAllListeners(),Ft.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},Pt.prototype.close=function(){Rt("close"),this._cleanup(!0)},Pt.enabled=!!Lt;var Ut=["Active"].concat("Object").join("X");!Pt.enabled&&Ut in r&&(Rt("overriding xmlhttprequest"),Lt=function(){try{return new r[Ut]("Microsoft.XMLHTTP")}catch(t){return null}},Pt.enabled=!!new Lt);var Mt=!1;try{Mt="withCredentials"in new Lt}catch(cs){}Pt.supportsCORS=Mt;var Wt=Pt,Dt=W.exports,Jt=Wt;function Bt(t,e,n,r){Jt.call(this,t,e,n,r)}Dt(Bt,Jt),Bt.enabled=Jt.enabled&&Jt.supportsCORS;var qt=Bt,Gt=W.exports,zt=Wt;function Ht(t,e,n){zt.call(this,t,e,n,{noCredentials:!0})}Gt(Ht,zt),Ht.enabled=zt.enabled;var Vt=Ht,$t={isOpera:function(){return r.navigator&&/opera/i.test(r.navigator.userAgent)},isKonqueror:function(){return r.navigator&&/konqueror/i.test(r.navigator.userAgent)},hasDomain:function(){if(!r.document)return!0;try{return!!r.document.domain}catch(t){return!1}}},Xt=W.exports,Qt=Et,Kt=Nt,Zt=qt,Yt=Vt,te=$t;function ee(t){if(!Yt.enabled&&!Zt.enabled)throw new Error("Transport created when disabled");Qt.call(this,t,"/xhr_streaming",Kt,Zt)}Xt(ee,Qt),ee.enabled=function(t){return!t.nullOrigin&&(!te.isOpera()&&Zt.enabled)},ee.transportName="xhr-streaming",ee.roundTrips=2,ee.needBody=!!r.document;var ne=ee,re=D.EventEmitter,oe=W.exports,se=n.exports,ie=$t,ae=M,ce=function(){};function ue(t,e,n){ce(t,e);var r=this;re.call(this),setTimeout((function(){r._start(t,e,n)}),0)}ce=A.exports("sockjs-client:sender:xdr"),oe(ue,re),ue.prototype._start=function(t,e,n){ce("_start");var o=this,s=new r.XDomainRequest;e=ae.addQuery(e,"t="+ +new Date),s.onerror=function(){ce("onerror"),o._error()},s.ontimeout=function(){ce("ontimeout"),o._error()},s.onprogress=function(){ce("progress",s.responseText),o.emit("chunk",200,s.responseText)},s.onload=function(){ce("load"),o.emit("finish",200,s.responseText),o._cleanup(!1)},this.xdr=s,this.unloadRef=se.unloadAdd((function(){o._cleanup(!0)}));try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(i){this._error()}},ue.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},ue.prototype._cleanup=function(t){if(ce("cleanup",t),this.xdr){if(this.removeAllListeners(),se.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},ue.prototype.close=function(){ce("close"),this._cleanup(!0)},ue.enabled=!(!r.XDomainRequest||!ie.hasDomain());var le=ue,he=W.exports,pe=Et,de=Nt,fe=le;function me(t){if(!fe.enabled)throw new Error("Transport created when disabled");pe.call(this,t,"/xhr_streaming",de,fe)}he(me,pe),me.enabled=function(t){return!t.cookie_needed&&!t.nullOrigin&&(fe.enabled&&t.sameScheme)},me.transportName="xdr-streaming",me.roundTrips=2;var be=me,ve=r.EventSource,ge=W.exports,ye=D.EventEmitter,we=ve,xe=function(){};function Ce(t){xe(t),ye.call(this);var e=this,n=this.es=new we(t);n.onmessage=function(t){xe("message",t.data),e.emit("message",decodeURI(t.data))},n.onerror=function(t){xe("error",n.readyState,t);var r=2!==n.readyState?"network":"permanent";e._cleanup(),e._close(r)}}xe=A.exports("sockjs-client:receiver:eventsource"),ge(Ce,ye),Ce.prototype.abort=function(){xe("abort"),this._cleanup(),this._close("user")},Ce.prototype._cleanup=function(){xe("cleanup");var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},Ce.prototype._close=function(t){xe("close",t);var e=this;setTimeout((function(){e.emit("close",null,t),e.removeAllListeners()}),200)};var _e=Ce,Ee=W.exports,Se=Et,Oe=_e,ke=qt,Te=ve;function Ne(t){if(!Ne.enabled())throw new Error("Transport created when disabled");Se.call(this,t,"/eventsource",Oe,ke)}Ee(Ne,Se),Ne.enabled=function(){return!!Te},Ne.transportName="eventsource",Ne.roundTrips=2;var je,Ie,Fe=Ne;function Ae(){return Ie?je:(Ie=1,je="1.6.1")}var Le={exports:{}};!function(e){var o=n.exports,s=$t,i=function(){};i=A.exports("sockjs-client:utils:iframe"),e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in r||(r[e.exports.WPrefix]={})},postMessage:function(t,n){r.parent!==r?r.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:n||""}),"*"):i("Cannot postMessage, no parent window.",t,n)},createIframe:function(t,e){var n,s,a=r.document.createElement("iframe"),c=function(){i("unattach"),clearTimeout(n);try{a.onload=null}catch(t){}a.onerror=null},u=function(){i("cleanup"),a&&(c(),setTimeout((function(){a&&a.parentNode.removeChild(a),a=null}),0),o.unloadDel(s))},l=function(t){i("onerror",t),a&&(u(),e(t))};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){l("onerror")},a.onload=function(){i("onload"),clearTimeout(n),n=setTimeout((function(){l("onload timeout")}),2e3)},r.document.body.appendChild(a),n=setTimeout((function(){l("timeout")}),15e3),s=o.unloadAdd(u),{post:function(t,e){i("post",t,e),setTimeout((function(){try{a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}catch(n){}}),0)},cleanup:u,loaded:c}},createHtmlfile:function(t,n){var s,a,c,u=["Active"].concat("Object").join("X"),l=new r[u]("htmlfile"),h=function(){clearTimeout(s),c.onerror=null},p=function(){l&&(h(),o.unloadDel(a),c.parentNode.removeChild(c),c=l=null,CollectGarbage())},d=function(t){i("onerror",t),l&&(p(),n(t))};l.open(),l.write('<html><script>document.domain="'+r.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=r[e.exports.WPrefix];var f=l.createElement("div");return l.body.appendChild(f),c=l.createElement("iframe"),f.appendChild(c),c.src=t,c.onerror=function(){d("onerror")},s=setTimeout((function(){d("timeout")}),15e3),a=o.unloadAdd(p),{post:function(t,e){try{setTimeout((function(){c&&c.contentWindow&&c.contentWindow.postMessage(t,e)}),0)}catch(n){}},cleanup:p,loaded:h}}},e.exports.iframeEnabled=!1,r.document&&(e.exports.iframeEnabled=("function"==typeof r.postMessage||"object"===t(r.postMessage))&&!s.isKonqueror())}(Le);var Re=W.exports,Pe=D.EventEmitter,Ue=Ae(),Me=M,We=Le.exports,De=n.exports,Je=l,Be=function(){};function qe(t,e,n){if(!qe.enabled())throw new Error("Transport created when disabled");Pe.call(this);var r=this;this.origin=Me.getOrigin(n),this.baseUrl=n,this.transUrl=e,this.transport=t,this.windowId=Je.string(8);var o=Me.addPath(n,"/iframe.html")+"#"+this.windowId;Be(t,e,o),this.iframeObj=We.createIframe(o,(function(t){Be("err callback"),r.emit("close",1006,"Unable to load an iframe ("+t+")"),r.close()})),this.onmessageCallback=this._message.bind(this),De.attachEvent("message",this.onmessageCallback)}Be=A.exports("sockjs-client:transport:iframe"),Re(qe,Pe),qe.prototype.close=function(){if(Be("close"),this.removeAllListeners(),this.iframeObj){De.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},qe.prototype._message=function(t){if(Be("message",t.data),Me.isOriginEqual(t.origin,this.origin)){var e;try{e=JSON.parse(t.data)}catch(cs){return void Be("bad json",t.data)}if(e.windowId===this.windowId)switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Ue,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var n;try{n=JSON.parse(e.data)}catch(cs){return void Be("bad json",e.data)}this.emit("close",n[0],n[1]),this.close()}else Be("mismatched window id",e.windowId,this.windowId)}else Be("not same origin",t.origin,this.origin)},qe.prototype.postMessage=function(t,e){Be("postMessage",t,e),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)},qe.prototype.send=function(t){Be("send",t),this.postMessage("m",t)},qe.enabled=function(){return We.iframeEnabled},qe.transportName="iframe",qe.roundTrips=2;var Ge=qe,ze={isObject:function(e){var n=t(e);return"function"===n||"object"===n&&!!e},extend:function(t){if(!this.isObject(t))return t;for(var e,n,r=1,o=arguments.length;r<o;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}},He=W.exports,Ve=Ge,$e=ze,Xe=function(t){function e(e,n){Ve.call(this,t.transportName,e,n)}return He(e,Ve),e.enabled=function(e,n){if(!r.document)return!1;var o=$e.extend({},n);return o.sameOrigin=!0,t.enabled(o)&&Ve.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=Ve.roundTrips+t.roundTrips-1,e.facadeTransport=t,e},Qe=W.exports,Ke=Le.exports,Ze=M,Ye=D.EventEmitter,tn=l,en=function(){};function nn(t){en(t),Ye.call(this);var e=this;Ke.polluteGlobalNamespace(),this.id="a"+tn.string(6),t=Ze.addQuery(t,"c="+decodeURIComponent(Ke.WPrefix+"."+this.id)),en("using htmlfile",nn.htmlfileEnabled);var n=nn.htmlfileEnabled?Ke.createHtmlfile:Ke.createIframe;r[Ke.WPrefix][this.id]={start:function(){en("start"),e.iframeObj.loaded()},message:function(t){en("message",t),e.emit("message",t)},stop:function(){en("stop"),e._cleanup(),e._close("network")}},this.iframeObj=n(t,(function(){en("callback"),e._cleanup(),e._close("permanent")}))}en=A.exports("sockjs-client:receiver:htmlfile"),Qe(nn,Ye),nn.prototype.abort=function(){en("abort"),this._cleanup(),this._close("user")},nn.prototype._cleanup=function(){en("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r[Ke.WPrefix][this.id]},nn.prototype._close=function(t){en("_close",t),this.emit("close",null,t),this.removeAllListeners()},nn.htmlfileEnabled=!1;var rn=["Active"].concat("Object").join("X");if(rn in r)try{nn.htmlfileEnabled=!!new r[rn]("htmlfile")}catch(us){}nn.enabled=nn.htmlfileEnabled||Ke.iframeEnabled;var on=nn,sn=W.exports,an=on,cn=Vt,un=Et;function ln(t){if(!an.enabled)throw new Error("Transport created when disabled");un.call(this,t,"/htmlfile",an,cn)}sn(ln,un),ln.enabled=function(t){return an.enabled&&t.sameOrigin},ln.transportName="htmlfile",ln.roundTrips=2;var hn=ln,pn=W.exports,dn=Et,fn=Nt,mn=qt,bn=Vt;function vn(t){if(!bn.enabled&&!mn.enabled)throw new Error("Transport created when disabled");dn.call(this,t,"/xhr",fn,mn)}pn(vn,dn),vn.enabled=function(t){return!t.nullOrigin&&(!(!bn.enabled||!t.sameOrigin)||mn.enabled)},vn.transportName="xhr-polling",vn.roundTrips=2;var gn=vn,yn=W.exports,wn=Et,xn=be,Cn=Nt,_n=le;function En(t){if(!_n.enabled)throw new Error("Transport created when disabled");wn.call(this,t,"/xhr",Cn,_n)}yn(En,wn),En.enabled=xn.enabled,En.transportName="xdr-polling",En.roundTrips=2;var Sn=En,On=Le.exports,kn=l,Tn=$t,Nn=M,jn=W.exports,In=D.EventEmitter,Fn=function(){};function An(t){Fn(t);var e=this;In.call(this),On.polluteGlobalNamespace(),this.id="a"+kn.string(6);var n=Nn.addQuery(t,"c="+encodeURIComponent(On.WPrefix+"."+this.id));r[On.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout((function(){Fn("timeout"),e._abort(new Error("JSONP script loaded abnormally (timeout)"))}),An.timeout)}Fn=A.exports("sockjs-client:receiver:jsonp"),jn(An,In),An.prototype.abort=function(){if(Fn("abort"),r[On.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},An.timeout=35e3,An.scriptErrorTimeout=1e3,An.prototype._callback=function(t){Fn("_callback",t),this._cleanup(),this.aborting||(t&&(Fn("message",t),this.emit("message",t)),this.emit("close",null,"network"),this.removeAllListeners())},An.prototype._abort=function(t){Fn("_abort",t),this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()},An.prototype._cleanup=function(){if(Fn("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete r[On.WPrefix][this.id]},An.prototype._scriptError=function(){Fn("_scriptError");var t=this;this.errorTimer||(this.errorTimer=setTimeout((function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))}),An.scriptErrorTimeout))},An.prototype._createScript=function(t){Fn("_createScript",t);var e,n=this,o=this.script=r.document.createElement("script");if(o.id="a"+kn.string(8),o.src=t,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){Fn("onload"),n._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(Fn("onreadystatechange",o.readyState),/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){n.loadedOkay=!0;try{o.onclick()}catch(us){}}o&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&r.document.attachEvent)if(Tn.isOpera())(e=this.script2=r.document.createElement("script")).text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=e.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(us){}o.async=!0}void 0!==o.async&&(o.async=!0);var s=r.document.getElementsByTagName("head")[0];s.insertBefore(o,s.firstChild),e&&s.insertBefore(e,s.firstChild)};var Ln,Rn,Pn=An,Un=l,Mn=M,Wn=function(){};Wn=A.exports("sockjs-client:sender:jsonp");var Dn=W.exports,Jn=gt,Bn=Pn,qn=function(t,e,n){Wn(t,e),Ln||(Wn("createForm"),(Ln=r.document.createElement("form")).style.display="none",Ln.style.position="absolute",Ln.method="POST",Ln.enctype="application/x-www-form-urlencoded",Ln.acceptCharset="UTF-8",(Rn=r.document.createElement("textarea")).name="d",Ln.appendChild(Rn),r.document.body.appendChild(Ln));var o="a"+Un.string(8);Ln.target=o,Ln.action=Mn.addQuery(Mn.addPath(t,"/jsonp_send"),"i="+o);var s=function(t){Wn("createIframe",t);try{return r.document.createElement('<iframe name="'+t+'">')}catch(us){var e=r.document.createElement("iframe");return e.name=t,e}}(o);s.id=o,s.style.display="none",Ln.appendChild(s);try{Rn.value=e}catch(a){}Ln.submit();var i=function(t){Wn("completed",o,t),s.onerror&&(s.onreadystatechange=s.onerror=s.onload=null,setTimeout((function(){Wn("cleaning up",o),s.parentNode.removeChild(s),s=null}),500),Rn.value="",n(t))};return s.onerror=function(){Wn("onerror",o),i()},s.onload=function(){Wn("onload",o),i()},s.onreadystatechange=function(t){Wn("onreadystatechange",o,s.readyState,t),"complete"===s.readyState&&i()},function(){Wn("aborted",o),i(new Error("Aborted"))}};function Gn(t){if(!Gn.enabled())throw new Error("Transport created when disabled");Jn.call(this,t,"/jsonp",qn,Bn)}Dn(Gn,Jn),Gn.enabled=function(){return!!r.document},Gn.transportName="jsonp-polling",Gn.roundTrips=1,Gn.needBody=!0;var zn,Hn=Gn,Vn=[et,ne,be,Fe,Xe(Fe),hn,Xe(hn),gn,Sn,Xe(gn),Hn],$n=Array.prototype,Xn=Object.prototype,Qn=Function.prototype,Kn=String.prototype,Zn=$n.slice,Yn=Xn.toString,tr=function(t){return"[object Function]"===Xn.toString.call(t)},er=function(t){return"[object String]"===Yn.call(t)},nr=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();zn=nr?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var rr=function(t,e,n){for(var r in e)Xn.hasOwnProperty.call(e,r)&&zn(t,r,e[r],n)},or=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};function sr(){}rr(Qn,{bind:function(t){var e=this;if(!tr(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=Zn.call(arguments,1),r=Math.max(0,e.length-n.length),o=[],s=0;s<r;s++)o.push("$"+s);var i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof i){var r=e.apply(this,n.concat(Zn.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(Zn.call(arguments)))}));return e.prototype&&(sr.prototype=e.prototype,i.prototype=new sr,sr.prototype=null),i}}),rr(Array,{isArray:function(t){return"[object Array]"===Yn.call(t)}});var ir,ar,cr,ur=Object("a"),lr="a"!==ur[0]||!(0 in ur);rr($n,{forEach:function(t){var e=or(this),n=lr&&er(this)?this.split(""):e,r=arguments[1],o=-1,s=n.length>>>0;if(!tr(t))throw new TypeError;for(;++o<s;)o in n&&t.call(r,n[o],o,e)}},(ir=$n.forEach,ar=!0,cr=!0,ir&&(ir.call("foo",(function(e,n,r){"object"!==t(r)&&(ar=!1)})),ir.call([1],(function(){cr="string"==typeof this}),"x")),!(ir&&ar&&cr)));var hr=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);rr($n,{indexOf:function(t){var e=lr&&er(this)?this.split(""):or(this),n=e.length>>>0;if(!n)return-1;var r,o=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),o=r),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in e&&e[o]===t)return o;return-1}},hr);var pr,dr=Kn.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(pr=void 0===/()??/.exec("")[1],Kn.split=function(t,e){var n=this;if(void 0===t&&0===e)return[];if("[object RegExp]"!==Yn.call(t))return dr.call(this,t,e);var r,o,s,i,a=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),u=0;for(t=new RegExp(t.source,c+"g"),n+="",pr||(r=new RegExp("^"+t.source+"$(?!\\s)",c)),e=void 0===e?-1>>>0:e>>>0;(o=t.exec(n))&&!((s=o.index+o[0].length)>u&&(a.push(n.slice(u,o.index)),!pr&&o.length>1&&o[0].replace(r,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)})),o.length>1&&o.index<n.length&&$n.push.apply(a,o.slice(1)),i=o[0].length,u=s,a.length>=e));)t.lastIndex===o.index&&t.lastIndex++;return u===n.length?!i&&t.test("")||a.push(""):a.push(n.slice(u)),a.length>e?a.slice(0,e):a}):"0".split(void 0,0).length&&(Kn.split=function(t,e){return void 0===t&&0===e?[]:dr.call(this,t,e)});var fr=Kn.substr,mr="".substr&&"b"!=="0b".substr(-1);rr(Kn,{substr:function(t,e){return fr.call(this,t<0&&(t=this.length+t)<0?0:t,e)}},mr);var br,vr=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,gr={quote:function(t){var e=JSON.stringify(t);return vr.lastIndex=0,vr.test(e)?(br||(br=function(t){var e,n={},r=[];for(e=0;e<65536;e++)r.push(String.fromCharCode(e));return t.lastIndex=0,r.join("").replace(t,(function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""})),t.lastIndex=0,n}(vr)),e.replace(vr,(function(t){return br[t]}))):e}},yr=function(){};yr=A.exports("sockjs-client:utils:transport");var wr={};["log","debug","warn"].forEach((function(t){var e;try{e=r.console&&r.console[t]&&r.console[t].apply}catch(n){}wr[t]=e?function(){return r.console[t].apply(r.console,arguments)}:"log"===t?function(){}:wr.log}));var xr=wr;function Cr(t){this.type=t}Cr.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},Cr.prototype.stopPropagation=function(){},Cr.prototype.preventDefault=function(){},Cr.CAPTURING_PHASE=1,Cr.AT_TARGET=2,Cr.BUBBLING_PHASE=3;var _r=Cr,Er=r.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},Sr=W.exports,Or=_r;function kr(){Or.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}Sr(kr,Or);var Tr=kr,Nr=W.exports,jr=_r;function Ir(t){jr.call(this),this.initEvent("message",!1,!1),this.data=t}Nr(Ir,jr);var Fr=Ir,Ar=D.EventEmitter;function Lr(){var t=this;Ar.call(this),this.to=setTimeout((function(){t.emit("finish",200,"{}")}),Lr.timeout)}(0,W.exports)(Lr,Ar),Lr.prototype.close=function(){clearTimeout(this.to)},Lr.timeout=2e3;var Rr=Lr,Pr=D.EventEmitter,Ur=W.exports,Mr=ze,Wr=function(){};function Dr(t,e){Pr.call(this);var n=this,r=+new Date;this.xo=new e("GET",t),this.xo.once("finish",(function(t,e){var o,s;if(200===t){if(s=+new Date-r,e)try{o=JSON.parse(e)}catch(i){Wr("bad json",e)}Mr.isObject(o)||(o={})}n.emit("finish",o,s),n.removeAllListeners()}))}Wr=A.exports("sockjs-client:info-ajax"),Ur(Dr,Pr),Dr.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var Jr=Dr,Br=W.exports,qr=D.EventEmitter,Gr=Vt,zr=Jr;function Hr(t){var e=this;qr.call(this),this.ir=new zr(t,Gr),this.ir.once("finish",(function(t,n){e.ir=null,e.emit("message",JSON.stringify([t,n]))}))}Br(Hr,qr),Hr.transportName="iframe-info-receiver",Hr.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var Vr=Hr,$r=D.EventEmitter,Xr=W.exports,Qr=n.exports,Kr=Ge,Zr=Vr,Yr=function(){};function to(t,e){var n=this;$r.call(this);var o=function(){var r=n.ifr=new Kr(Zr.transportName,e,t);r.once("message",(function(t){if(t){var e;try{e=JSON.parse(t)}catch(s){return Yr("bad json",t),n.emit("finish"),void n.close()}var r=e[0],o=e[1];n.emit("finish",r,o)}n.close()})),r.once("close",(function(){n.emit("finish"),n.close()}))};r.document.body?o():Qr.attachEvent("load",o)}Yr=A.exports("sockjs-client:info-iframe"),Xr(to,$r),to.enabled=function(){return Kr.enabled()},to.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var eo=to,no=D.EventEmitter,ro=W.exports,oo=M,so=le,io=qt,ao=Vt,co=Rr,uo=eo,lo=Jr,ho=function(){};function po(t,e){ho(t);var n=this;no.call(this),setTimeout((function(){n.doXhr(t,e)}),0)}ho=A.exports("sockjs-client:info-receiver"),ro(po,no),po._getReceiver=function(t,e,n){return n.sameOrigin?new lo(e,ao):io.enabled?new lo(e,io):so.enabled&&n.sameScheme?new lo(e,so):uo.enabled()?new uo(t,e):new lo(e,co)},po.prototype.doXhr=function(t,e){var n=this,r=oo.addPath(t,"/info");ho("doXhr",r),this.xo=po._getReceiver(t,r,e),this.timeoutRef=setTimeout((function(){ho("timeout"),n._cleanup(!1),n.emit("finish")}),po.timeout),this.xo.once("finish",(function(t,e){ho("finish",t,e),n._cleanup(!0),n.emit("finish",t,e)}))},po.prototype._cleanup=function(t){ho("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},po.prototype.close=function(){ho("close"),this.removeAllListeners(),this._cleanup(!1)},po.timeout=8e3;var fo,mo,bo,vo,go=po;function yo(){if(vo)return bo;vo=1;var t=M,e=n.exports,r=function(){if(mo)return fo;mo=1;var t=Le.exports;function e(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(e,n){t.postMessage("c",JSON.stringify([e,n]))},e.prototype._transportMessage=function(e){t.postMessage("t",e)},e.prototype._send=function(t){this._transport.send(t)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},fo=e}(),o=Vr,s=Le.exports,i=Er,a=function(){};return a=A.exports("sockjs-client:iframe-bootstrap"),bo=function(n,c){var u,l={};c.forEach((function(t){t.facadeTransport&&(l[t.facadeTransport.transportName]=t.facadeTransport)})),l[o.transportName]=o,n.bootstrap_iframe=function(){var o;s.currentWindowId=i.hash.slice(1);e.attachEvent("message",(function(e){if(e.source===parent&&(void 0===u&&(u=e.origin),e.origin===u)){var c;try{c=JSON.parse(e.data)}catch(cs){return void a("bad json",e.data)}if(c.windowId===s.currentWindowId)switch(c.type){case"s":var h;try{h=JSON.parse(c.data)}catch(cs){a("bad json",c.data);break}var p=h[0],d=h[1],f=h[2],m=h[3];if(a(p,d,f,m),p!==n.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+n.version+'".');if(!t.isOriginEqual(f,i.href)||!t.isOriginEqual(m,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+f+", "+m+")");o=new r(new l[d](f,m));break;case"m":o._send(c.data);break;case"c":o&&o._close(),o=null}}})),s.postMessage("s")}},bo}var wo,xo=F,Co=W.exports,_o=l,Eo=gr,So=M,Oo=n.exports,ko=function(t){return{filterToEnabled:function(e,n){var r={main:[],facade:[]};return e?"string"==typeof e&&(e=[e]):e=[],t.forEach((function(t){t&&("websocket"!==t.transportName||!1!==n.websocket?e.length&&-1===e.indexOf(t.transportName)?yr("not in whitelist",t.transportName):t.enabled(n)?(yr("enabled",t.transportName),r.main.push(t),t.facadeTransport&&r.facade.push(t.facadeTransport)):yr("disabled",t.transportName):yr("disabled from server","websocket"))})),r}}},To=ze,No=$t,jo=xr,Io=_r,Fo=B,Ao=Er,Lo=Tr,Ro=Fr,Po=go,Uo=function(){};function Mo(t,e,n){if(!(this instanceof Mo))return new Mo(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");Fo.call(this),this.readyState=Mo.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&jo.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return _o.string(r)}}this._server=n.server||_o.numberString(1e3);var o=new xo(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https:"===Ao.protocol&&!s&&!So.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var i=e.sort();i.forEach((function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<i.length-1&&t===i[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")}));var a=So.getOrigin(Ao.href);this._origin=a?a.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,Uo("using url",this.url),this._urlInfo={nullOrigin:!No.hasDomain(),sameOrigin:So.isOriginEqual(this.url,Ao.href),sameScheme:So.isSchemeEqual(this.url,Ao.href)},this._ir=new Po(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function Wo(t){return 1e3===t||t>=3e3&&t<=4999}Uo=A.exports("sockjs-client:main"),Co(Mo,Fo),Mo.prototype.close=function(t,e){if(t&&!Wo(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==Mo.CLOSING&&this.readyState!==Mo.CLOSED){this._close(t||1e3,e||"Normal closure",!0)}},Mo.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===Mo.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===Mo.OPEN&&this._transport.send(Eo.quote(t))},Mo.version=Ae(),Mo.CONNECTING=0,Mo.OPEN=1,Mo.CLOSING=2,Mo.CLOSED=3,Mo.prototype._receiveInfo=function(t,e){if(Uo("_receiveInfo",e),this._ir=null,t){this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=To.extend(t,this._urlInfo),Uo("info",t);var n=wo.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,Uo(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},Mo.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(Uo("attempt",t.transportName),t.needBody&&(!r.document.body||void 0!==r.document.readyState&&"complete"!==r.document.readyState&&"interactive"!==r.document.readyState))return Uo("waiting for body"),this._transports.unshift(t),void Oo.attachEvent("load",this._connect.bind(this));var e=Math.max(this._timeout,this._rto*t.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e),Uo("using timeout",e);var n=So.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[t.transportName];Uo("transport url",n);var s=new t(n,this._transUrl,o);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=t.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},Mo.prototype._transportTimeout=function(){Uo("_transportTimeout"),this.readyState===Mo.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},Mo.prototype._transportMessage=function(t){Uo("_transportMessage",t);var e,n=this,r=t.slice(0,1),o=t.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new Io("heartbeat")),void Uo("heartbeat",this.transport)}if(o)try{e=JSON.parse(o)}catch(s){Uo("bad json",o)}if(void 0!==e)switch(r){case"a":Array.isArray(e)&&e.forEach((function(t){Uo("message",n.transport,t),n.dispatchEvent(new Ro(t))}));break;case"m":Uo("message",this.transport,e),this.dispatchEvent(new Ro(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}else Uo("empty payload",o)},Mo.prototype._transportClose=function(t,e){Uo("_transportClose",this.transport,t,e),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),Wo(t)||2e3===t||this.readyState!==Mo.CONNECTING?this._close(t,e):this._connect()},Mo.prototype._open=function(){Uo("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===Mo.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=Mo.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new Io("open")),Uo("connected",this.transport)):this._close(1006,"Server lost session")},Mo.prototype._close=function(t,e,n){Uo("_close",this.transport,t,e,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===Mo.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=Mo.CLOSING,setTimeout(function(){this.readyState=Mo.CLOSED,r&&this.dispatchEvent(new Io("error"));var o=new Lo;o.wasClean=n||!1,o.code=t||1e3,o.reason=e,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null,Uo("disconnected")}.bind(this),0)},Mo.prototype.countRTO=function(t){return t>100?4*t:300+t};var Do,Jo=(wo=ko(Do=Vn),yo()(Mo,Do),Mo);"_sockjs_onload"in r&&setTimeout(r._sockjs_onload,1);var Bo={exports:{}},qo={};!function(t){(function(){var e,n,r,o,s={}.hasOwnProperty,i=[].slice;e={LF:"\n",NULL:"\0"},r=function(){var t;function n(t,e,n){this.command=t,this.headers=null!=e?e:{},this.body=null!=n?n:""}return n.prototype.toString=function(){var t,r,o,i,a;for(r in t=[this.command],(o=!1===this.headers["content-length"])&&delete this.headers["content-length"],a=this.headers)s.call(a,r)&&(i=a[r],t.push(r+":"+i));return this.body&&!o&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(t){return t?encodeURI(t).match(/%..|./g).length:0},t=function(t){var r,o,s,i,a,c,u,l,h,p,d,f,m,b,v,g,y;for(i=t.search(RegExp(""+e.LF+e.LF)),s=(a=t.substring(0,i).split(e.LF)).shift(),c={},f=function(t){return t.replace(/^\s+|\s+$/g,"")},m=0,v=(g=a.reverse()).length;m<v;m++)l=(p=g[m]).indexOf(":"),c[f(p.substring(0,l))]=f(p.substring(l+1));if(r="",d=i+2,c["content-length"])h=parseInt(c["content-length"]),r=(""+t).substring(d,d+h);else for(o=null,u=b=d,y=t.length;(d<=y?b<y:b>y)&&(o=t.charAt(u))!==e.NULL;u=d<=y?++b:--b)r+=o;return new n(s,c,r)},n.unmarshall=function(n){var r;return function(){var o,s,i,a;for(a=[],o=0,s=(i=n.split(RegExp(""+e.NULL+e.LF+"*"))).length;o<s;o++)(null!=(r=i[o])?r.length:void 0)>0&&a.push(t(r));return a}()},n.marshall=function(t,r,o){return new n(t,r,o).toString()+e.NULL},n}(),n=function(){var t;function n(t){this.ws=t,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return n.prototype.debug=function(t){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.console)?e.log(t):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(t,e,n){var o;for(o=r.marshall(t,e,n),"function"==typeof this.debug&&this.debug(">>> "+o);;){if(!(o.length>this.maxWebSocketFrameSize))return this.ws.send(o);this.ws.send(o.substring(0,this.maxWebSocketFrameSize)),o=o.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+o.length)}},n.prototype._setupHeartbeat=function(n){var r,s,i,a,c,u,l;if((c=n.version)===o.VERSIONS.V1_1||c===o.VERSIONS.V1_2)return s=(u=function(){var t,e,r,o;for(o=[],t=0,e=(r=n["heart-beat"].split(",")).length;t<e;t++)a=r[t],o.push(parseInt(a));return o}())[0],r=u[1],0!==this.heartbeat.outgoing&&0!==r&&(i=Math.max(this.heartbeat.outgoing,r),"function"==typeof this.debug&&this.debug("send PING every "+i+"ms"),this.pinger=o.setInterval(i,(l=this,function(){return l.ws.send(e.LF),"function"==typeof l.debug?l.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==s?(i=Math.max(this.heartbeat.incoming,s),"function"==typeof this.debug&&this.debug("check PONG every "+i+"ms"),this.ponger=o.setInterval(i,function(e){return function(){var n;if((n=t()-e.serverActivity)>2*i)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var t,e,n,r;switch(r={},(t=1<=arguments.length?i.call(arguments,0):[]).length){case 2:r=t[0],e=t[1];break;case 3:t[1]instanceof Function?(r=t[0],e=t[1],n=t[2]):(r.login=t[0],r.passcode=t[1],e=t[2]);break;case 4:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3];break;default:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3],r.host=t[4]}return[r,e,n]},n.prototype.connect=function(){var n,s,a,c,u;return n=1<=arguments.length?i.call(arguments,0):[],c=this._parseConnect.apply(this,n),a=c[0],this.connectCallback=c[1],s=c[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(u=this,function(n){var o,i,a,c,l,h,p,d,f,m,b,v;if(c="undefined"!=typeof ArrayBuffer&&n.data instanceof ArrayBuffer?(o=new Uint8Array(n.data),"function"==typeof u.debug&&u.debug("--- got data length: "+o.length),function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)i=o[t],n.push(String.fromCharCode(i));return n}().join("")):n.data,u.serverActivity=t(),c!==e.LF){for("function"==typeof u.debug&&u.debug("<<< "+c),v=[],f=0,m=(b=r.unmarshall(c)).length;f<m;f++)switch((l=b[f]).command){case"CONNECTED":"function"==typeof u.debug&&u.debug("connected to server "+l.headers.server),u.connected=!0,u._setupHeartbeat(l.headers),v.push("function"==typeof u.connectCallback?u.connectCallback(l):void 0);break;case"MESSAGE":d=l.headers.subscription,(p=u.subscriptions[d]||u.onreceive)?(a=u,h=l.headers["message-id"],l.ack=function(t){return null==t&&(t={}),a.ack(h,d,t)},l.nack=function(t){return null==t&&(t={}),a.nack(h,d,t)},v.push(p(l))):v.push("function"==typeof u.debug?u.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":v.push("function"==typeof u.onreceipt?u.onreceipt(l):void 0);break;case"ERROR":v.push("function"==typeof s?s(l):void 0);break;default:v.push("function"==typeof u.debug?u.debug("Unhandled frame: "+l):void 0)}return v}"function"==typeof u.debug&&u.debug("<<< PONG")}),this.ws.onclose=function(t){return function(){var e;return e="Whoops! Lost connection to "+t.ws.url,"function"==typeof t.debug&&t.debug(e),t._cleanUp(),"function"==typeof s?s(e):void 0}}(this),this.ws.onopen=function(t){return function(){return"function"==typeof t.debug&&t.debug("Web Socket Opened..."),a["accept-version"]=o.VERSIONS.supportedVersions(),a["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(","),t._transmit("CONNECT",a)}}(this)},n.prototype.disconnect=function(t,e){return null==e&&(e={}),this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof t?t():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},n.prototype.send=function(t,e,n){return null==e&&(e={}),null==n&&(n=""),e.destination=t,this._transmit("SEND",e,n)},n.prototype.subscribe=function(t,e,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(t){return delete this.subscriptions[t],this._transmit("UNSUBSCRIBE",{id:t})},n.prototype.begin=function(t){var e,n;return n=t||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),e=this,{id:n,commit:function(){return e.commit(n)},abort:function(){return e.abort(n)}}},n.prototype.commit=function(t){return this._transmit("COMMIT",{transaction:t})},n.prototype.abort=function(t){return this._transmit("ABORT",{transaction:t})},n.prototype.ack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("ACK",n)},n.prototype.nack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("NACK",n)},n}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(t,e){var r;return null==e&&(e=["v10.stomp","v11.stomp"]),r=new(o.WebSocketClass||WebSocket)(t,e),new n(r)},over:function(t){return new n(t)},Frame:r},null!==t&&(t.Stomp=o),"undefined"!=typeof window&&null!==window?(o.setInterval=function(t,e){return window.setInterval(e,t)},o.clearInterval=function(t){return window.clearInterval(t)},window.Stomp=o):t||(self.Stomp=o)}).call(r)}(qo);var Go,zo,Ho={},Vo=new Proxy({},{get:function(t,e){throw new Error('Module "net" has been externalized for browser compatibility. Cannot access "net.'.concat(e,'" in client code.'))}}),$o=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Xo=o($o);var Qo,Ko,Zo,Yo,ts={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.35",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"};function es(){if(Yo)return Zo;var e;if(Yo=1,"object"===("undefined"==typeof globalThis?"undefined":t(globalThis)))e=globalThis;else try{e=function(){if(zo)return Go;zo=1;var e=function(){if("object"===("undefined"==typeof self?"undefined":t(self))&&self)return self;if("object"===("undefined"==typeof window?"undefined":t(window))&&window)return window;throw new Error("Unable to resolve global `this`")};return Go=function(){if(this)return this;if("object"===("undefined"==typeof globalThis?"undefined":t(globalThis))&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()}()}catch(s){}finally{if(e||"undefined"==typeof window||(e=window),!e)throw new Error("Could not determine global this")}var n=e.WebSocket||e.MozWebSocket,r=Ko?Qo:(Ko=1,Qo=ts.version);function o(t,e){return e?new n(t,e):new n(t)}return n&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(o,t,{get:function(){return n[t]}})})),Zo={w3cwebsocket:n?o:null,version:r}}(function(){var t,e,n,r,o,s;e=Xo,(t=qo).Stomp.setInterval=function(t,e){return setInterval(e,t)},t.Stomp.clearInterval=function(t){return clearInterval(t)},o=function(t,n){var r,o;return r=null,o={url:"tcp:// "+n+":"+t,send:function(t){return r.write(t)},close:function(){return r.end()}},(r=e.connect(t,n,(function(t){return o.onopen()}))).on("error",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),r.on("close",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),r.on("data",(function(t){var e;return e={data:t.toString()},o.onmessage(e)})),o},s=function(t){var e,n,r,o;return e=es().client,n=null,o={url:t,send:function(t){return n.sendUTF(t)},close:function(){return n.close()}},(r=new e).on("connect",(function(t){return n=t,o.onopen(),n.on("error",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),n.on("close",(function(){return"function"==typeof o.onclose?o.onclose():void 0})),n.on("message",(function(t){var e;if("utf8"===t.type)return e={data:t.utf8Data},o.onmessage(e)}))})),r.connect(t),o},n=function(e,n){var r;return r=o(n,e),t.Stomp.over(r)},r=function(e){var n;return n=s(e),t.Stomp.over(n)},Ho.overTCP=n,Ho.overWS=r}).call(r);var ns=qo,rs=Ho;Bo.exports=ns.Stomp,Bo.exports.overTCP=rs.overTCP,Bo.exports.overWS=rs.overWS;var os={data:function(){return{friendId:null,stompClient:null,username:"",message:"",messages:[]}},created:function(){this.friendId=this.$route.params.id},mounted:function(){this.connect()},methods:{connect:function(){var t=this,e=new Jo("http://localhost:9998/chat");this.stompClient=Bo.exports.over(e),i(),this.stompClient.connect({},(function(e){console.log("Connected: "+e);var n=t.friendId;t.stompClient.subscribe("/topic/chat/".concat(11,"/").concat(n),(function(e){t.showMessage(JSON.parse(e.body))})),t.stompClient.subscribe("/topic/chat/".concat(n,"/").concat(11),(function(e){t.showMessage(JSON.parse(e.body))})),t.stompClient.send("/app/chat.addUser/".concat(11,"/").concat(n),{},JSON.stringify({sender:11,type:"JOIN",friendId:n}))}),(function(t){console.error("Error connecting to WebSocket:",t)}))},sendMessage:function(){var t=this.message.trim();if(t&&this.stompClient){var e={sender:this.username,content:t,type:"CHAT"};this.stompClient.send("/app/chat.sendMessage/".concat(userId,"/").concat(friendId),{},JSON.stringify(e)),this.message=""}},showMessage:function(t){this.messages.push(t)},formatMessage:function(t){return"JOIN"===t.type?"".concat(t.sender," joined the chat"):"CHAT"===t.type?"".concat(t.sender,": ").concat(t.content):""}}},ss=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-container"},[t._m(0),e("div",{staticClass:"chat-box"},[e("ul",{attrs:{id:"chat"}},t._l(t.messages,(function(n,r){return e("li",{key:r,class:["chat-message","JOIN"===n.type?"join-message":n.sender===t.username?"user-message":"friend-message"]},[t._v(" "+t._s(t.formatMessage(n))+" ")])})),0)]),e("div",{staticClass:"message-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input-field",attrs:{placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),e("button",{staticClass:"send-btn",on:{click:t.sendMessage}},[t._v("Send")])])])},is=[function(){var t=this._self._c;return t("div",{staticClass:"header"},[t("h3",[this._v("Chat")])])}];ss._withStripped=!0;var as=s(os,ss,is,!1,null,"db7b52ac",null,null);as.options.__file="F:/GitHub/bruce-cxm-douyin/douyin_vue2/src/views/xiaoxi/xiaoxitdetail.vue";e("default",as.exports)}}}))}();
