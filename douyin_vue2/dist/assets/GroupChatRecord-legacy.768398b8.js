System.register(["./index-legacy.7979773c.js"],(function(e,t){"use strict";var a,n=document.createElement("style");return n.textContent=".nameInput[data-v-96ec8578]{width:150px}.topControlsBar[data-v-96ec8578]{margin:0 10px}\n",document.head.appendChild(n),{setters:[function(e){a=e.n}],execute:function(){e("default",a({name:"GroupChatRecord",data:function(){return{messTableData:[],msgTypeRadio:-1,multipleSelection:[],page:1,size:10,total:-1,nameKeyword:"",dateScope:null,loading:!1}},mounted:function(){this.initMessTableData()},methods:{initMessTableData:function(){var e=this;this.loading=!0;var t="/groupMsgContent/page?page="+this.page+"&size="+this.size;""!=this.nameKeyword&&(t+="&nickname="+this.nameKeyword),this.dateScope&&(t+="&dateScope="+this.dateScope),-1!=this.msgTypeRadio&&(t+="&type="+this.msgTypeRadio),this.getRequest(t).then((function(t){e.messTableData=t.data,e.total=t.total,setTimeout((function(){e.loading=!1}),1e3)}))},refreshMessTableData:function(){this.nameKeyword="",this.dateScope=null,this.msgTypeRadio=-1,this.initMessTableData()},exportData:function(){window.open("/groupMsgContent/download","_parent")},handleSizeChange:function(e){this.size=e,this.initMessTableData()},handleCurrentChange:function(e){this.page=e,this.initMessTableData()},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该条消息记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/groupMsgContent/"+e.id).then((function(e){e&&t.initMessTableData()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleMultiDelete:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="/groupMsgContent/?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest(t).then((function(t){t&&e.initMessTableData()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},(function(){var e=this,t=e._self._c;return t("div",[t("div",[e._v(" 发送者昵称："),t("el-input",{staticClass:"nameInput",attrs:{placeholder:"输入发送者昵称"},model:{value:e.nameKeyword,callback:function(t){e.nameKeyword=t},expression:"nameKeyword"}}),e._v(" 发送时间： "),t("el-date-picker",{staticClass:"topControlsBar",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,"unlink-panels":!0,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dateScope,callback:function(t){e.dateScope=t},expression:"dateScope"}}),e._v(" 消息类型： "),t("el-radio-group",{staticClass:"topControlsBar",model:{value:e.msgTypeRadio,callback:function(t){e.msgTypeRadio=t},expression:"msgTypeRadio"}},[t("el-radio",{attrs:{label:1}},[e._v("文本")]),t("el-radio",{attrs:{label:2}},[e._v("图片")]),t("el-radio",{attrs:{label:3}},[e._v("文件")])],1),t("el-button",{staticClass:"topControlsBar",attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:e.initMessTableData}},[e._v("搜索")]),t("el-button",{staticClass:"topControlsBar",attrs:{icon:"el-icon-refresh",type:"primary",size:"small"},on:{click:e.refreshMessTableData}},[e._v("刷新表格")]),t("el-button",{staticClass:"topControlsBar",attrs:{icon:"el-icon-document",type:"success",size:"small"},on:{click:e.exportData}},[e._v("导出Excel")])],1),t("div",{staticStyle:{"margin-top":"15px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.messTableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"消息编号",width:"80"}}),t("el-table-column",{attrs:{prop:"fromId",label:"发送者编号",width:"100"}}),t("el-table-column",{attrs:{prop:"fromName",label:"发送者昵称",width:"150"}}),t("el-table-column",{attrs:{prop:"createTime",label:"发送时间",width:"180"}}),t("el-table-column",{attrs:{label:"内容",width:"750"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.messageTypeId?t("div",{domProps:{innerHTML:e._s(a.row.content)}}):t("div",[t("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a.row.content,"preview-src-list":[a.row.content]}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1)]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[t("el-button",{attrs:{disabled:0==e.multipleSelection.length,type:"danger",icon:"el-icon-delete"},on:{click:e.handleMultiDelete}},[e._v("批量删除")]),t("el-pagination",{staticStyle:{display:"inline-block"},attrs:{"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])}),[],!1,null,"96ec8578",null,null).exports)}}}));
