import{n as s}from"./index.d6cacc81.js";const i={data(){return{user:null,isLoading:!1,error:null,avatarPreview:null,formErrors:{}}},computed:{isFormInvalid(){return Object.keys(this.formErrors).length>0||!this.user.name||!this.user.email}},beforeCreate(){setTimeout(()=>{console.log("beforeCreate: \u5B9E\u4F8B\u5316\u524D"),this.$emit("beforeAppInit","app is about to be initialized")},1e3)},created(){setTimeout(()=>{console.log("created: \u5B9E\u4F8B\u5DF2\u521B\u5EFA"),this.fetchUserData(),this.$emit("createdApp","app is now created")},1e3)},beforeMount(){setTimeout(()=>{console.log("beforeMount: \u6E32\u67D3\u524D"),this.checkUserCache()},1e3)},mounted(){setTimeout(()=>{console.log("mounted: \u7EC4\u4EF6\u6302\u8F7D\u5230 DOM \u540E"),this.initializeAvatarPreview()},1e3)},beforeUpdate(){setTimeout(()=>{console.log("beforeUpdate: \u6570\u636E\u5373\u5C06\u66F4\u65B0"),this.cleanupBeforeUpdate()},1e3)},updated(){setTimeout(()=>{console.log("updated: \u6570\u636E\u66F4\u65B0\u540E"),this.sendUserUpdateNotification()},1e3)},methods:{async fetchUserData(){this.isLoading=!0;try{const r=await this.simulateApiRequest();this.user=r.data,console.log("User data fetched successfully",this.user)}catch(r){this.error="Failed to fetch user data",console.error(r)}finally{this.isLoading=!1}},simulateApiRequest(){return new Promise((r,e)=>{setTimeout(()=>{r({data:{name:"Jane Doe",email:"janedoe@example.com",avatar:"https://emoji.bj.bcebos.com/yige-aigc/index_aigc/final/toolspics/1.png"}})},1e3)})},updateUserData(){if(console.log("updateUserData: \u63D0\u4EA4\u7528\u6237\u6570\u636E"),this.isLoading=!0,this.formErrors={},this.user.name||(this.formErrors.name="Name is required"),(!this.user.email||!this.isValidEmail(this.user.email))&&(this.formErrors.email="A valid email is required"),this.avatarPreview||(this.formErrors.avatar="Avatar is required"),Object.keys(this.formErrors).length>0){this.isLoading=!1;return}const r={name:"John Smith",email:"johnsmith@example.com",avatar:"https://emoji.bj.bcebos.com/yige-aigc/index_aigc/final/toolspics/1.png"};setTimeout(()=>{this.user=r,console.log("User updated successfully",this.user),alert("User data updated successfully!"),this.isLoading=!1},1e3)},isValidEmail(r){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(r)},onAvatarChange(r){const e=r.target.files[0];if(e){if(!e.type.startsWith("image/")){this.formErrors.avatar="Only image files are allowed";return}const t=new FileReader;t.onload=()=>{this.avatarPreview=t.result},t.readAsDataURL(e)}},checkUserCache(){console.log("Checking if user data is cached")},initializeAvatarPreview(){!this.avatarPreview&&this.user&&this.user.avatar&&(this.avatarPreview=this.user.avatar)},cleanupBeforeUpdate(){console.log("Cleaning up before update")},sendUserUpdateNotification(){console.log("User data updated, notifying other components or systems")}},beforeDestroy(){setTimeout(()=>{console.log("beforeDestroy: \u7EC4\u4EF6\u9500\u6BC1\u524D"),this.$emit("beforeComponentDestroy","cleaning up before destruction")},1e3)},destroyed(){setTimeout(()=>{console.log("destroyed: \u7EC4\u4EF6\u9500\u6BC1\u540E"),this.$emit("componentDestroyed","component has been destroyed")},1e3)}};var o=function(){var e=this,t=e._self._c;return e.user?t("div",[t("h1",[e._v("User Information")]),e.isLoading?t("div",{staticClass:"loading"},[e._v("Loading...")]):e._e(),e.error?t("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),!e.isLoading&&!e.error?t("div",[t("form",{on:{submit:function(a){return a.preventDefault(),e.updateUserData.apply(null,arguments)}}},[t("label",[e._v(" Name: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text"},domProps:{value:e.user.name},on:{input:function(a){a.target.composing||e.$set(e.user,"name",a.target.value)}}}),e.formErrors.name?t("span",{staticClass:"error-message"},[e._v(e._s(e.formErrors.name))]):e._e()]),t("br"),t("label",[e._v(" Email: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email"},domProps:{value:e.user.email},on:{input:function(a){a.target.composing||e.$set(e.user,"email",a.target.value)}}}),e.formErrors.email?t("span",{staticClass:"error-message"},[e._v(e._s(e.formErrors.email))]):e._e()]),t("br"),t("label",[e._v(" Avatar: "),t("input",{attrs:{type:"file"},on:{change:e.onAvatarChange}}),e.formErrors.avatar?t("span",{staticClass:"error-message"},[e._v(e._s(e.formErrors.avatar))]):e._e()]),t("br"),t("button",{attrs:{type:"submit",disabled:e.isFormInvalid}},[e._v("Save")])]),e.avatarPreview?t("div",[t("h2",[e._v("Avatar Preview")]),t("img",{attrs:{src:e.avatarPreview,alt:"Avatar",width:"100"}})]):e._e()]):e._e()]):e._e()},n=[],l=s(i,o,n,!1,null,"14d7dba6",null,null);const u=l.exports;export{u as default};
