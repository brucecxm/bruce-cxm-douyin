import{c as d,a as br,n as yr}from"./index.f6d0a6bc.js";import{u as wr}from"./token.fe39c3a6.js";var Q={exports:{}},it={};d.crypto&&d.crypto.getRandomValues?it.randomBytes=function(e){var t=new Uint8Array(e);return d.crypto.getRandomValues(t),t}:it.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t};var xr=it,Nt="abcdefghijklmnopqrstuvwxyz012345",ce={string:function(e){for(var t=Nt.length,n=xr.randomBytes(e),r=[],o=0;o<e;o++)r.push(Nt.substr(n[o]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}};(function(e){var t=ce,n={},r=!1,o=d.chrome&&d.chrome.app&&d.chrome.app.runtime;e.exports={attachEvent:function(c,l){typeof d.addEventListener<"u"?d.addEventListener(c,l,!1):d.document&&d.attachEvent&&(d.document.attachEvent("on"+c,l),d.attachEvent("on"+c,l))},detachEvent:function(c,l){typeof d.addEventListener<"u"?d.removeEventListener(c,l,!1):d.document&&d.detachEvent&&(d.document.detachEvent("on"+c,l),d.detachEvent("on"+c,l))},unloadAdd:function(c){if(o)return null;var l=t.string(8);return n[l]=c,r&&setTimeout(this.triggerUnloadCallbacks,0),l},unloadDel:function(c){c in n&&delete n[c]},triggerUnloadCallbacks:function(){for(var c in n)n[c](),delete n[c]}};var u=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",u)})(Q);var _r=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},vt={},Cr=Object.prototype.hasOwnProperty,Er;function Rt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function Ft(e){try{return encodeURIComponent(e)}catch(t){return null}}function Sr(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},r;r=t.exec(e);){var o=Rt(r[1]),u=Rt(r[2]);o===null||u===null||o in n||(n[o]=u)}return n}function $r(e,t){t=t||"";var n=[],r,o;typeof t!="string"&&(t="?");for(o in e)if(Cr.call(e,o)){if(r=e[o],!r&&(r===null||r===Er||isNaN(r))&&(r=""),o=Ft(o),r=Ft(r),o===null||r===null)continue;n.push(o+"="+r)}return n.length?t+n.join("&"):""}vt.stringify=$r;vt.parse=Sr;var on=_r,Ue=vt,Or=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,sn=/[\n\r\t]/g,kr=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,an=/:\d+$/,Ir=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Tr=/^[a-zA-Z]:/;function gt(e){return(e||"").toString().replace(Or,"")}var st=[["#","hash"],["?","query"],function(t,n){return W(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],At={hash:1,query:1};function cn(e){var t;typeof window<"u"?t=window:typeof d<"u"?t=d:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var r={},o=typeof e,u;if(e.protocol==="blob:")r=new D(unescape(e.pathname),{});else if(o==="string"){r=new D(e,{});for(u in At)delete r[u]}else if(o==="object"){for(u in e)u in At||(r[u]=e[u]);r.slashes===void 0&&(r.slashes=kr.test(e.href))}return r}function W(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function un(e,t){e=gt(e),e=e.replace(sn,""),t=t||{};var n=Ir.exec(e),r=n[1]?n[1].toLowerCase():"",o=!!n[2],u=!!n[3],c=0,l;return o?u?(l=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(l=n[2]+n[4],c=n[2].length):u?(l=n[3]+n[4],c=n[3].length):l=n[4],r==="file:"?c>=2&&(l=l.slice(2)):W(r)?l=n[4]:r?o&&(l=l.slice(2)):c>=2&&W(t.protocol)&&(l=n[4]),{protocol:r,slashes:o||W(r),slashesCount:c,rest:l}}function jr(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],u=!1,c=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),c++):c&&(r===0&&(u=!0),n.splice(r,1),c--);return u&&n.unshift(""),(o==="."||o==="..")&&n.push(""),n.join("/")}function D(e,t,n){if(e=gt(e),e=e.replace(sn,""),!(this instanceof D))return new D(e,t,n);var r,o,u,c,l,f,a=st.slice(),s=typeof t,i=this,h=0;for(s!=="object"&&s!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=Ue.parse),t=cn(t),o=un(e||"",t),r=!o.protocol&&!o.slashes,i.slashes=o.slashes||r&&t.slashes,i.protocol=o.protocol||t.protocol||"",e=o.rest,(o.protocol==="file:"&&(o.slashesCount!==2||Tr.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!W(i.protocol)))&&(a[3]=[/(.*)/,"pathname"]);h<a.length;h++){if(c=a[h],typeof c=="function"){e=c(e,i);continue}u=c[0],f=c[1],u!==u?i[f]=e:typeof u=="string"?(l=u==="@"?e.lastIndexOf(u):e.indexOf(u),~l&&(typeof c[2]=="number"?(i[f]=e.slice(0,l),e=e.slice(l+c[2])):(i[f]=e.slice(l),e=e.slice(0,l)))):(l=u.exec(e))&&(i[f]=l[1],e=e.slice(0,l.index)),i[f]=i[f]||r&&c[3]&&t[f]||"",c[4]&&(i[f]=i[f].toLowerCase())}n&&(i.query=n(i.query)),r&&t.slashes&&i.pathname.charAt(0)!=="/"&&(i.pathname!==""||t.pathname!=="")&&(i.pathname=jr(i.pathname,t.pathname)),i.pathname.charAt(0)!=="/"&&W(i.protocol)&&(i.pathname="/"+i.pathname),on(i.port,i.protocol)||(i.host=i.hostname,i.port=""),i.username=i.password="",i.auth&&(l=i.auth.indexOf(":"),~l?(i.username=i.auth.slice(0,l),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=i.auth.slice(l+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(i.auth)),i.auth=i.password?i.username+":"+i.password:i.username),i.origin=i.protocol!=="file:"&&W(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString()}function Nr(e,t,n){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||Ue.parse)(t)),r[e]=t;break;case"port":r[e]=t,on(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,an.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var u=t.indexOf(":");~u?(r.username=t.slice(0,u),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(u+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<st.length;c++){var l=st[c];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&W(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function Rr(e){(!e||typeof e!="function")&&(e=Ue.stringify);var t,n=this,r=n.host,o=n.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var u=o+(n.protocol&&n.slashes||W(n.protocol)?"//":"");return n.username?(u+=n.username,n.password&&(u+=":"+n.password),u+="@"):n.password?(u+=":"+n.password,u+="@"):n.protocol!=="file:"&&W(n.protocol)&&!r&&n.pathname!=="/"&&(u+="@"),(r[r.length-1]===":"||an.test(n.hostname)&&!n.port)&&(r+=":"),u+=r+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(u+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(u+=n.hash),u}D.prototype={set:Nr,toString:Rr};D.extractProtocol=un;D.location=cn;D.trimLeft=gt;D.qs=Ue;var ln=D,x={exports:{}},ze,Lt;function Fr(){if(Lt)return ze;Lt=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,u=r*365.25;ze=function(s,i){i=i||{};var h=typeof s;if(h==="string"&&s.length>0)return c(s);if(h==="number"&&isFinite(s))return i.long?f(s):l(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function c(s){if(s=String(s),!(s.length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!!i){var h=parseFloat(i[1]),p=(i[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*u;case"weeks":case"week":case"w":return h*o;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function l(s){var i=Math.abs(s);return i>=r?Math.round(s/r)+"d":i>=n?Math.round(s/n)+"h":i>=t?Math.round(s/t)+"m":i>=e?Math.round(s/e)+"s":s+"ms"}function f(s){var i=Math.abs(s);return i>=r?a(s,i,r,"day"):i>=n?a(s,i,n,"hour"):i>=t?a(s,i,t,"minute"):i>=e?a(s,i,e,"second"):s+" ms"}function a(s,i,h,p){var m=i>=h*1.5;return Math.round(s/h)+" "+p+(m?"s":"")}return ze}function Ar(e){n.debug=n,n.default=n,n.coerce=f,n.disable=c,n.enable=u,n.enabled=l,n.humanize=Fr(),Object.keys(e).forEach(function(a){n[a]=e[a]}),n.instances=[],n.names=[],n.skips=[],n.formatters={};function t(a){for(var s=0,i=0;i<a.length;i++)s=(s<<5)-s+a.charCodeAt(i),s|=0;return n.colors[Math.abs(s)%n.colors.length]}n.selectColor=t;function n(a){var s;function i(){if(!!i.enabled){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];var b=i,v=Number(new Date),C=v-(s||v);b.diff=C,b.prev=s,b.curr=v,s=v,p[0]=n.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var _=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(S,J){if(S==="%%")return S;_++;var j=n.formatters[J];if(typeof j=="function"){var N=p[_];S=j.call(b,N),p.splice(_,1),_--}return S}),n.formatArgs.call(b,p);var w=b.log||n.log;w.apply(b,p)}}return i.namespace=a,i.enabled=n.enabled(a),i.useColors=n.useColors(),i.color=t(a),i.destroy=r,i.extend=o,typeof n.init=="function"&&n.init(i),n.instances.push(i),i}function r(){var a=n.instances.indexOf(this);return a!==-1?(n.instances.splice(a,1),!0):!1}function o(a,s){return n(this.namespace+(typeof s>"u"?":":s)+a)}function u(a){n.save(a),n.names=[],n.skips=[];var s,i=(typeof a=="string"?a:"").split(/[\s,]+/),h=i.length;for(s=0;s<h;s++)!i[s]||(a=i[s].replace(/\*/g,".*?"),a[0]==="-"?n.skips.push(new RegExp("^"+a.substr(1)+"$")):n.names.push(new RegExp("^"+a+"$")));for(s=0;s<n.instances.length;s++){var p=n.instances[s];p.enabled=n.enabled(p.namespace)}}function c(){n.enable("")}function l(a){if(a[a.length-1]==="*")return!0;var s,i;for(s=0,i=n.skips.length;s<i;s++)if(n.skips[s].test(a))return!1;for(s=0,i=n.names.length;s<i;s++)if(n.names[s].test(a))return!0;return!1}function f(a){return a instanceof Error?a.stack||a.message:a}return n.enable(n.load()),n}var Lr=Ar;(function(e,t){function n(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(h){return typeof h}:n=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(s)}t.log=u,t.formatArgs=o,t.save=c,t.load=l,t.useColors=r,t.storage=f(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var i="color: "+this.color;s.splice(1,0,i,"color: inherit");var h=0,p=0;s[0].replace(/%[a-zA-Z%]/g,function(m){m!=="%%"&&(h++,m==="%c"&&(p=h))}),s.splice(p,0,i)}}function u(){var s;return(typeof console>"u"?"undefined":n(console))==="object"&&console.log&&(s=console).log.apply(s,arguments)}function c(s){try{s?t.storage.setItem("debug",s):t.storage.removeItem("debug")}catch(i){}}function l(){var s;try{s=t.storage.getItem("debug")}catch(i){}return!s&&typeof process<"u"&&"env"in process&&(s={}.DEBUG),s}function f(){try{return localStorage}catch(s){}}e.exports=Lr(t);var a=e.exports.formatters;a.j=function(s){try{return JSON.stringify(s)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}})(x,x.exports);var Pr=ln,fn=function(){};fn=x.exports("sockjs-client:utils:url");var A={getOrigin:function(e){if(!e)return null;var t=new Pr(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return fn("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},g={exports:{}};typeof Object.create=="function"?g.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:g.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var $={};function Me(){this._listeners={}}Me.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n};Me.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(!!n){var r=n.indexOf(t);if(r!==-1){n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e];return}}};Me.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)};var hn=Me,Ur=g.exports,Be=hn;function Z(){Be.call(this)}Ur(Z,Be);Z.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}};Z.prototype.once=function(e,t){var n=this,r=!1;function o(){n.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}this.on(e,o)};Z.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(!!t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var u=0;u<t.length;u++)t[u].apply(this,r)}};Z.prototype.on=Z.prototype.addListener=Be.prototype.addEventListener;Z.prototype.removeListener=Be.prototype.removeEventListener;$.EventEmitter=Z;var at={exports:{}},Pt=d.WebSocket||d.MozWebSocket;Pt?at.exports=function(t){return new Pt(t)}:at.exports=void 0;var pn=Q.exports,Mr=A,Br=g.exports,dn=$.EventEmitter,mn=at.exports,B=function(){};B=x.exports("sockjs-client:websocket");function K(e,t,n){if(!K.enabled())throw new Error("Transport created when disabled");dn.call(this),B("constructor",e);var r=this,o=Mr.addPath(e,"/websocket");o.slice(0,5)==="https"?o="wss"+o.slice(5):o="ws"+o.slice(4),this.url=o,this.ws=new mn(this.url,[],n),this.ws.onmessage=function(u){B("message event",u.data),r.emit("message",u.data)},this.unloadRef=pn.unloadAdd(function(){B("unload"),r.ws.close()}),this.ws.onclose=function(u){B("close event",u.code,u.reason),r.emit("close",u.code,u.reason),r._cleanup()},this.ws.onerror=function(u){B("error event",u),r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}Br(K,dn);K.prototype.send=function(e){var t="["+e+"]";B("send",t),this.ws.send(t)};K.prototype.close=function(){B("close");var e=this.ws;this._cleanup(),e&&e.close()};K.prototype._cleanup=function(){B("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),pn.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};K.enabled=function(){return B("enabled"),!!mn};K.transportName="websocket";K.roundTrips=2;var Wr=K,qr=g.exports,vn=$.EventEmitter,q=function(){};q=x.exports("sockjs-client:buffered-sender");function re(e,t){q(e),vn.call(this),this.sendBuffer=[],this.sender=t,this.url=e}qr(re,vn);re.prototype.send=function(e){q("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};re.prototype.sendScheduleWait=function(){q("sendScheduleWait");var e=this,t;this.sendStop=function(){q("sendStop"),e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){q("timeout"),e.sendStop=null,e.sendSchedule()},25)};re.prototype.sendSchedule=function(){q("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(n){e.sendStop=null,n?(q("error",n),e.emit("close",n.code||1006,"Sending error: "+n),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};re.prototype._cleanup=function(){q("_cleanup"),this.removeAllListeners()};re.prototype.close=function(){q("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var Dr=re,Xr=g.exports,gn=$.EventEmitter,ae=function(){};ae=x.exports("sockjs-client:polling");function We(e,t,n){ae(t),gn.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}Xr(We,gn);We.prototype._scheduleReceiver=function(){ae("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(n){ae("message",n),e.emit("message",n)}),t.once("close",function(n,r){ae("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(r==="network"?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})};We.prototype.abort=function(){ae("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var Hr=We,Jr=g.exports,Gr=A,bt=Dr,zr=Hr,ve=function(){};ve=x.exports("sockjs-client:sender-receiver");function yt(e,t,n,r,o){var u=Gr.addPath(e,t);ve(u);var c=this;bt.call(this,e,n),this.poll=new zr(r,u,o),this.poll.on("message",function(l){ve("poll message",l),c.emit("message",l)}),this.poll.once("close",function(l,f){ve("poll close",l,f),c.poll=null,c.emit("close",l,f),c.close()})}Jr(yt,bt);yt.prototype.close=function(){bt.prototype.close.call(this),ve("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var bn=yt,Vr=g.exports,Qr=A,yn=bn,Le=function(){};Le=x.exports("sockjs-client:ajax-based");function Kr(e){return function(t,n,r){Le("create ajax sender",t,n);var o={};typeof n=="string"&&(o.headers={"Content-type":"text/plain"});var u=Qr.addPath(t,"/xhr_send"),c=new e("POST",u,n,o);return c.once("finish",function(l){if(Le("finish",l),c=null,l!==200&&l!==204)return r(new Error("http status "+l));r()}),function(){Le("abort"),c.close(),c=null;var l=new Error("Aborted");l.code=1e3,r(l)}}}function wn(e,t,n,r){yn.call(this,e,t,Kr(r),n,r)}Vr(wn,yn);var ue=wn,Zr=g.exports,xn=$.EventEmitter,z=function(){};z=x.exports("sockjs-client:receiver:xhr");function _e(e,t){z(e),xn.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,o){z("finish",r,o),n._chunkHandler(r,o),n.xo=null;var u=r===200?"network":"permanent";z("close",u),n.emit("close",null,u),n._cleanup()})}Zr(_e,xn);_e.prototype._chunkHandler=function(e,t){if(z("_chunkHandler",e),!(e!==200||!t))for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(n=r.indexOf(`
`),n===-1)break;var o=r.slice(0,n);o&&(z("message",o),this.emit("message",o))}};_e.prototype._cleanup=function(){z("_cleanup"),this.removeAllListeners()};_e.prototype.abort=function(){z("abort"),this.xo&&(this.xo.close(),z("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var qe=_e,_n=$.EventEmitter,Yr=g.exports,Cn=Q.exports,eo=A,ye=d.XMLHttpRequest,O=function(){};O=x.exports("sockjs-client:browser:xhr");function X(e,t,n,r){O(e,t);var o=this;_n.call(this),setTimeout(function(){o._start(e,t,n,r)},0)}Yr(X,_n);X.prototype._start=function(e,t,n,r){var o=this;try{this.xhr=new ye}catch(c){}if(!this.xhr){O("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}t=eo.addQuery(t,"t="+ +new Date),this.unloadRef=Cn.unloadAdd(function(){O("unload cleanup"),o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){O("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch(c){O("exception",c),this.emit("finish",0,""),this._cleanup(!1);return}if((!r||!r.noCredentials)&&X.supportsCORS&&(O("withCredentials"),this.xhr.withCredentials=!0),r&&r.headers)for(var u in r.headers)this.xhr.setRequestHeader(u,r.headers[u]);this.xhr.onreadystatechange=function(){if(o.xhr){var c=o.xhr,l,f;switch(O("readyState",c.readyState),c.readyState){case 3:try{f=c.status,l=c.responseText}catch(a){}O("status",f),f===1223&&(f=204),f===200&&l&&l.length>0&&(O("chunk"),o.emit("chunk",f,l));break;case 4:f=c.status,O("status",f),f===1223&&(f=204),(f===12005||f===12029)&&(f=0),O("finish",f,c.responseText),o.emit("finish",f,c.responseText),o._cleanup(!1);break}}};try{o.xhr.send(n)}catch(c){o.emit("finish",0,""),o._cleanup(!1)}};X.prototype._cleanup=function(e){if(O("cleanup"),!!this.xhr){if(this.removeAllListeners(),Cn.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}};X.prototype.close=function(){O("close"),this._cleanup(!0)};X.enabled=!!ye;var Ut=["Active"].concat("Object").join("X");!X.enabled&&Ut in d&&(O("overriding xmlhttprequest"),ye=function(){try{return new d[Ut]("Microsoft.XMLHTTP")}catch(e){return null}},X.enabled=!!new ye);var En=!1;try{En="withCredentials"in new ye}catch(e){}X.supportsCORS=En;var Sn=X,to=g.exports,Pe=Sn;function wt(e,t,n,r){Pe.call(this,e,t,n,r)}to(wt,Pe);wt.enabled=Pe.enabled&&Pe.supportsCORS;var De=wt,no=g.exports,xt=Sn;function _t(e,t,n){xt.call(this,e,t,n,{noCredentials:!0})}no(_t,xt);_t.enabled=xt.enabled;var Ce=_t,Ee={isOpera:function(){return d.navigator&&/opera/i.test(d.navigator.userAgent)},isKonqueror:function(){return d.navigator&&/konqueror/i.test(d.navigator.userAgent)},hasDomain:function(){if(!d.document)return!0;try{return!!d.document.domain}catch(e){return!1}}},ro=g.exports,$n=ue,oo=qe,ct=De,io=Ce,so=Ee;function le(e){if(!io.enabled&&!ct.enabled)throw new Error("Transport created when disabled");$n.call(this,e,"/xhr_streaming",oo,ct)}ro(le,$n);le.enabled=function(e){return e.nullOrigin||so.isOpera()?!1:ct.enabled};le.transportName="xhr-streaming";le.roundTrips=2;le.needBody=!!d.document;var ao=le,On=$.EventEmitter,co=g.exports,kn=Q.exports,uo=Ee,lo=A,G=function(){};G=x.exports("sockjs-client:sender:xdr");function oe(e,t,n){G(e,t);var r=this;On.call(this),setTimeout(function(){r._start(e,t,n)},0)}co(oe,On);oe.prototype._start=function(e,t,n){G("_start");var r=this,o=new d.XDomainRequest;t=lo.addQuery(t,"t="+ +new Date),o.onerror=function(){G("onerror"),r._error()},o.ontimeout=function(){G("ontimeout"),r._error()},o.onprogress=function(){G("progress",o.responseText),r.emit("chunk",200,o.responseText)},o.onload=function(){G("load"),r.emit("finish",200,o.responseText),r._cleanup(!1)},this.xdr=o,this.unloadRef=kn.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(u){this._error()}};oe.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};oe.prototype._cleanup=function(e){if(G("cleanup",e),!!this.xdr){if(this.removeAllListeners(),kn.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}};oe.prototype.close=function(){G("close"),this._cleanup(!0)};oe.enabled=!!(d.XDomainRequest&&uo.hasDomain());var Ct=oe,fo=g.exports,In=ue,ho=qe,ut=Ct;function Se(e){if(!ut.enabled)throw new Error("Transport created when disabled");In.call(this,e,"/xhr_streaming",ho,ut)}fo(Se,In);Se.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:ut.enabled&&e.sameScheme};Se.transportName="xdr-streaming";Se.roundTrips=2;var Tn=Se,jn=d.EventSource,po=g.exports,Nn=$.EventEmitter,mo=jn,te=function(){};te=x.exports("sockjs-client:receiver:eventsource");function $e(e){te(e),Nn.call(this);var t=this,n=this.es=new mo(e);n.onmessage=function(r){te("message",r.data),t.emit("message",decodeURI(r.data))},n.onerror=function(r){te("error",n.readyState,r);var o=n.readyState!==2?"network":"permanent";t._cleanup(),t._close(o)}}po($e,Nn);$e.prototype.abort=function(){te("abort"),this._cleanup(),this._close("user")};$e.prototype._cleanup=function(){te("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};$e.prototype._close=function(e){te("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var vo=$e,go=g.exports,Rn=ue,bo=vo,yo=De,wo=jn;function fe(e){if(!fe.enabled())throw new Error("Transport created when disabled");Rn.call(this,e,"/eventsource",bo,yo)}go(fe,Rn);fe.enabled=function(){return!!wo};fe.transportName="eventsource";fe.roundTrips=2;var Mt=fe,Ve,Bt;function Fn(){return Bt||(Bt=1,Ve="1.6.1"),Ve}var he={exports:{}};(function(e){var t=Q.exports,n=Ee,r=function(){};r=x.exports("sockjs-client:utils:iframe"),e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in d||(d[e.exports.WPrefix]={})},postMessage:function(o,u){d.parent!==d?d.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:o,data:u||""}),"*"):r("Cannot postMessage, no parent window.",o,u)},createIframe:function(o,u){var c=d.document.createElement("iframe"),l,f,a=function(){r("unattach"),clearTimeout(l);try{c.onload=null}catch(p){}c.onerror=null},s=function(){r("cleanup"),c&&(a(),setTimeout(function(){c&&c.parentNode.removeChild(c),c=null},0),t.unloadDel(f))},i=function(p){r("onerror",p),c&&(s(),u(p))},h=function(p,m){r("post",p,m),setTimeout(function(){try{c&&c.contentWindow&&c.contentWindow.postMessage(p,m)}catch(b){}},0)};return c.src=o,c.style.display="none",c.style.position="absolute",c.onerror=function(){i("onerror")},c.onload=function(){r("onload"),clearTimeout(l),l=setTimeout(function(){i("onload timeout")},2e3)},d.document.body.appendChild(c),l=setTimeout(function(){i("timeout")},15e3),f=t.unloadAdd(s),{post:h,cleanup:s,loaded:a}},createHtmlfile:function(o,u){var c=["Active"].concat("Object").join("X"),l=new d[c]("htmlfile"),f,a,s,i=function(){clearTimeout(f),s.onerror=null},h=function(){l&&(i(),t.unloadDel(a),s.parentNode.removeChild(s),s=l=null,CollectGarbage())},p=function(v){r("onerror",v),l&&(h(),u(v))},m=function(v,C){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(v,C)},0)}catch(_){}};l.open(),l.write('<html><script>document.domain="'+d.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=d[e.exports.WPrefix];var b=l.createElement("div");return l.body.appendChild(b),s=l.createElement("iframe"),b.appendChild(s),s.src=o,s.onerror=function(){p("onerror")},f=setTimeout(function(){p("timeout")},15e3),a=t.unloadAdd(h),{post:m,cleanup:h,loaded:i}}},e.exports.iframeEnabled=!1,d.document&&(e.exports.iframeEnabled=(typeof d.postMessage=="function"||typeof d.postMessage=="object")&&!n.isKonqueror())})(he);var xo=g.exports,An=$.EventEmitter,_o=Fn(),lt=A,Ln=he.exports,Pn=Q.exports,Co=ce,L=function(){};L=x.exports("sockjs-client:transport:iframe");function H(e,t,n){if(!H.enabled())throw new Error("Transport created when disabled");An.call(this);var r=this;this.origin=lt.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=Co.string(8);var o=lt.addPath(n,"/iframe.html")+"#"+this.windowId;L(e,t,o),this.iframeObj=Ln.createIframe(o,function(u){L("err callback"),r.emit("close",1006,"Unable to load an iframe ("+u+")"),r.close()}),this.onmessageCallback=this._message.bind(this),Pn.attachEvent("message",this.onmessageCallback)}xo(H,An);H.prototype.close=function(){if(L("close"),this.removeAllListeners(),this.iframeObj){Pn.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};H.prototype._message=function(e){if(L("message",e.data),!lt.isOriginEqual(e.origin,this.origin)){L("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch(r){L("bad json",e.data);return}if(t.windowId!==this.windowId){L("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([_o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(r){L("bad json",t.data);return}this.emit("close",n[0],n[1]),this.close();break}};H.prototype.postMessage=function(e,t){L("postMessage",e,t),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};H.prototype.send=function(e){L("send",e),this.postMessage("m",e)};H.enabled=function(){return Ln.iframeEnabled};H.transportName="iframe";H.roundTrips=2;var Un=H,Et={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},Eo=g.exports,Ne=Un,So=Et,Qe=function(e){function t(n,r){Ne.call(this,e.transportName,n,r)}return Eo(t,Ne),t.enabled=function(n,r){if(!d.document)return!1;var o=So.extend({},r);return o.sameOrigin=!0,e.enabled(o)&&Ne.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=Ne.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},$o=g.exports,ee=he.exports,Oo=A,Mn=$.EventEmitter,ko=ce,M=function(){};M=x.exports("sockjs-client:receiver:htmlfile");function P(e){M(e),Mn.call(this);var t=this;ee.polluteGlobalNamespace(),this.id="a"+ko.string(6),e=Oo.addQuery(e,"c="+decodeURIComponent(ee.WPrefix+"."+this.id)),M("using htmlfile",P.htmlfileEnabled);var n=P.htmlfileEnabled?ee.createHtmlfile:ee.createIframe;d[ee.WPrefix][this.id]={start:function(){M("start"),t.iframeObj.loaded()},message:function(r){M("message",r),t.emit("message",r)},stop:function(){M("stop"),t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){M("callback"),t._cleanup(),t._close("permanent")})}$o(P,Mn);P.prototype.abort=function(){M("abort"),this._cleanup(),this._close("user")};P.prototype._cleanup=function(){M("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete d[ee.WPrefix][this.id]};P.prototype._close=function(e){M("_close",e),this.emit("close",null,e),this.removeAllListeners()};P.htmlfileEnabled=!1;var Wt=["Active"].concat("Object").join("X");if(Wt in d)try{P.htmlfileEnabled=!!new d[Wt]("htmlfile")}catch(e){}P.enabled=P.htmlfileEnabled||ee.iframeEnabled;var Io=P,To=g.exports,ft=Io,jo=Ce,Bn=ue;function Oe(e){if(!ft.enabled)throw new Error("Transport created when disabled");Bn.call(this,e,"/htmlfile",ft,jo)}To(Oe,Bn);Oe.enabled=function(e){return ft.enabled&&e.sameOrigin};Oe.transportName="htmlfile";Oe.roundTrips=2;var qt=Oe,No=g.exports,Wn=ue,Ro=qe,ht=De,qn=Ce;function ke(e){if(!qn.enabled&&!ht.enabled)throw new Error("Transport created when disabled");Wn.call(this,e,"/xhr",Ro,ht)}No(ke,Wn);ke.enabled=function(e){return e.nullOrigin?!1:qn.enabled&&e.sameOrigin?!0:ht.enabled};ke.transportName="xhr-polling";ke.roundTrips=2;var Dt=ke,Fo=g.exports,Dn=ue,Ao=Tn,Lo=qe,Xt=Ct;function Ie(e){if(!Xt.enabled)throw new Error("Transport created when disabled");Dn.call(this,e,"/xhr",Lo,Xt)}Fo(Ie,Dn);Ie.enabled=Ao.enabled;Ie.transportName="xdr-polling";Ie.roundTrips=2;var Po=Ie,ge=he.exports,Xn=ce,Uo=Ee,Mo=A,Bo=g.exports,Hn=$.EventEmitter,R=function(){};R=x.exports("sockjs-client:receiver:jsonp");function F(e){R(e);var t=this;Hn.call(this),ge.polluteGlobalNamespace(),this.id="a"+Xn.string(6);var n=Mo.addQuery(e,"c="+encodeURIComponent(ge.WPrefix+"."+this.id));d[ge.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){R("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},F.timeout)}Bo(F,Hn);F.prototype.abort=function(){if(R("abort"),d[ge.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};F.timeout=35e3;F.scriptErrorTimeout=1e3;F.prototype._callback=function(e){R("_callback",e),this._cleanup(),!this.aborting&&(e&&(R("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())};F.prototype._abort=function(e){R("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};F.prototype._cleanup=function(){if(R("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete d[ge.WPrefix][this.id]};F.prototype._scriptError=function(){R("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},F.scriptErrorTimeout))};F.prototype._createScript=function(e){R("_createScript",e);var t=this,n=this.script=d.document.createElement("script"),r;if(n.id="a"+Xn.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){R("onload"),t._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(R("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){t.loadedOkay=!0;try{n.onclick()}catch(u){}}n&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof n.async>"u"&&d.document.attachEvent)if(Uo.isOpera())r=this.script2=d.document.createElement("script"),r.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=r.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(u){}n.async=!0}typeof n.async<"u"&&(n.async=!0);var o=d.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),r&&o.insertBefore(r,o.firstChild)};var Wo=F,qo=ce,Ht=A,U=function(){};U=x.exports("sockjs-client:sender:jsonp");var T,be;function Do(e){U("createIframe",e);try{return d.document.createElement('<iframe name="'+e+'">')}catch(n){var t=d.document.createElement("iframe");return t.name=e,t}}function Xo(){U("createForm"),T=d.document.createElement("form"),T.style.display="none",T.style.position="absolute",T.method="POST",T.enctype="application/x-www-form-urlencoded",T.acceptCharset="UTF-8",be=d.document.createElement("textarea"),be.name="d",T.appendChild(be),d.document.body.appendChild(T)}var Ho=function(e,t,n){U(e,t),T||Xo();var r="a"+qo.string(8);T.target=r,T.action=Ht.addQuery(Ht.addPath(e,"/jsonp_send"),"i="+r);var o=Do(r);o.id=r,o.style.display="none",T.appendChild(o);try{be.value=t}catch(c){}T.submit();var u=function(c){U("completed",r,c),o.onerror&&(o.onreadystatechange=o.onerror=o.onload=null,setTimeout(function(){U("cleaning up",r),o.parentNode.removeChild(o),o=null},500),be.value="",n(c))};return o.onerror=function(){U("onerror",r),u()},o.onload=function(){U("onload",r),u()},o.onreadystatechange=function(c){U("onreadystatechange",r,o.readyState,c),o.readyState==="complete"&&u()},function(){U("aborted",r),u(new Error("Aborted"))}},Jo=g.exports,Jn=bn,Go=Wo,zo=Ho;function ie(e){if(!ie.enabled())throw new Error("Transport created when disabled");Jn.call(this,e,"/jsonp",zo,Go)}Jo(ie,Jn);ie.enabled=function(){return!!d.document};ie.transportName="jsonp-polling";ie.roundTrips=1;ie.needBody=!0;var Vo=ie,Qo=[Wr,ao,Tn,Mt,Qe(Mt),qt,Qe(qt),Dt,Po,Qe(Dt),Vo],we=Array.prototype,St=Object.prototype,Ko=Function.prototype,xe=String.prototype,Ke=we.slice,$t=St.toString,Gn=function(e){return St.toString.call(e)==="[object Function]"},Zo=function(t){return $t.call(t)==="[object Array]"},zn=function(t){return $t.call(t)==="[object String]"},Yo=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}(),pt;Yo?pt=function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:pt=function(e,t,n,r){!r&&t in e||(e[t]=n)};var Te=function(e,t,n){for(var r in t)St.hasOwnProperty.call(t,r)&&pt(e,r,t[r],n)},Vn=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function ei(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function ti(e){return e>>>0}function Ze(){}Te(Ko,{bind:function(t){var n=this;if(!Gn(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=Ke.call(arguments,1),o=function(){if(this instanceof f){var a=n.apply(this,r.concat(Ke.call(arguments)));return Object(a)===a?a:this}else return n.apply(t,r.concat(Ke.call(arguments)))},u=Math.max(0,n.length-r.length),c=[],l=0;l<u;l++)c.push("$"+l);var f=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this, arguments); }")(o);return n.prototype&&(Ze.prototype=n.prototype,f.prototype=new Ze,Ze.prototype=null),f}});Te(Array,{isArray:Zo});var Jt=Object("a"),Qn=Jt[0]!=="a"||!(0 in Jt),ni=function(t){var n=!0,r=!0;return t&&(t.call("foo",function(o,u,c){typeof c!="object"&&(n=!1)}),t.call([1],function(){r=typeof this=="string"},"x")),!!t&&n&&r};Te(we,{forEach:function(t){var n=Vn(this),r=Qn&&zn(this)?this.split(""):n,o=arguments[1],u=-1,c=r.length>>>0;if(!Gn(t))throw new TypeError;for(;++u<c;)u in r&&t.call(o,r[u],u,n)}},!ni(we.forEach));var ri=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;Te(we,{indexOf:function(t){var n=Qn&&zn(this)?this.split(""):Vn(this),r=n.length>>>0;if(!r)return-1;var o=0;for(arguments.length>1&&(o=ei(arguments[1])),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in n&&n[o]===t)return o;return-1}},ri);var Gt=xe.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;xe.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if($t.call(t)!=="[object RegExp]")return Gt.call(this,t,n);var o=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),c=0,l,f,a,s;for(t=new RegExp(t.source,u+"g"),r+="",e||(l=new RegExp("^"+t.source+"$(?!\\s)",u)),n=n===void 0?-1>>>0:ti(n);(f=t.exec(r))&&(a=f.index+f[0].length,!(a>c&&(o.push(r.slice(c,f.index)),!e&&f.length>1&&f[0].replace(l,function(){for(var i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(f[i]=void 0)}),f.length>1&&f.index<r.length&&we.push.apply(o,f.slice(1)),s=f[0].length,c=a,o.length>=n)));)t.lastIndex===f.index&&t.lastIndex++;return c===r.length?(s||!t.test(""))&&o.push(""):o.push(r.slice(c)),o.length>n?o.slice(0,n):o}}():"0".split(void 0,0).length&&(xe.split=function(t,n){return t===void 0&&n===0?[]:Gt.call(this,t,n)});var oi=xe.substr,ii="".substr&&"0b".substr(-1)!=="b";Te(xe,{substr:function(t,n){return oi.call(this,t<0&&(t=this.length+t)<0?0:t,n)}},ii);var Re=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,Ye,si=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(o){return n[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n},ai={quote:function(e){var t=JSON.stringify(e);return Re.lastIndex=0,Re.test(t)?(Ye||(Ye=si(Re)),t.replace(Re,function(n){return Ye[n]})):t}},de=function(){};de=x.exports("sockjs-client:utils:transport");var ci=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(o){if(!!o){if(o.transportName==="websocket"&&n.websocket===!1){de("disabled from server","websocket");return}if(t.length&&t.indexOf(o.transportName)===-1){de("not in whitelist",o.transportName);return}o.enabled(n)?(de("enabled",o.transportName),r.main.push(o),o.facadeTransport&&r.facade.push(o.facadeTransport)):de("disabled",o.transportName)}}),r}}},dt={};["log","debug","warn"].forEach(function(e){var t;try{t=d.console&&d.console[e]&&d.console[e].apply}catch(n){}dt[e]=t?function(){return d.console[e].apply(d.console,arguments)}:e==="log"?function(){}:dt.log});var ui=dt;function se(e){this.type=e}se.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this};se.prototype.stopPropagation=function(){};se.prototype.preventDefault=function(){};se.CAPTURING_PHASE=1;se.AT_TARGET=2;se.BUBBLING_PHASE=3;var Ot=se,Kn=d.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},li=g.exports,Zn=Ot;function Yn(){Zn.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}li(Yn,Zn);var fi=Yn,hi=g.exports,er=Ot;function tr(e){er.call(this),this.initEvent("message",!1,!1),this.data=e}hi(tr,er);var pi=tr,nr=$.EventEmitter,di=g.exports;function je(){var e=this;nr.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},je.timeout)}di(je,nr);je.prototype.close=function(){clearTimeout(this.to)};je.timeout=2e3;var mi=je,rr=$.EventEmitter,vi=g.exports,gi=Et,or=function(){};or=x.exports("sockjs-client:info-ajax");function kt(e,t){rr.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(o,u){var c,l;if(o===200){if(l=+new Date-r,u)try{c=JSON.parse(u)}catch(f){or("bad json",u)}gi.isObject(c)||(c={})}n.emit("finish",c,l),n.removeAllListeners()})}vi(kt,rr);kt.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var ir=kt,bi=g.exports,sr=$.EventEmitter,yi=Ce,wi=ir;function Xe(e){var t=this;sr.call(this),this.ir=new wi(e,yi),this.ir.once("finish",function(n,r){t.ir=null,t.emit("message",JSON.stringify([n,r]))})}bi(Xe,sr);Xe.transportName="iframe-info-receiver";Xe.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var ar=Xe,cr=$.EventEmitter,xi=g.exports,_i=Q.exports,ur=Un,Ci=ar,lr=function(){};lr=x.exports("sockjs-client:info-iframe");function He(e,t){var n=this;cr.call(this);var r=function(){var o=n.ifr=new ur(Ci.transportName,t,e);o.once("message",function(u){if(u){var c;try{c=JSON.parse(u)}catch(a){lr("bad json",u),n.emit("finish"),n.close();return}var l=c[0],f=c[1];n.emit("finish",l,f)}n.close()}),o.once("close",function(){n.emit("finish"),n.close()})};d.document.body?r():_i.attachEvent("load",r)}xi(He,cr);He.enabled=function(){return ur.enabled()};He.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var Ei=He,fr=$.EventEmitter,Si=g.exports,$i=A,zt=Ct,Vt=De,Oi=Ce,ki=mi,Qt=Ei,Fe=ir,ne=function(){};ne=x.exports("sockjs-client:info-receiver");function V(e,t){ne(e);var n=this;fr.call(this),setTimeout(function(){n.doXhr(e,t)},0)}Si(V,fr);V._getReceiver=function(e,t,n){return n.sameOrigin?new Fe(t,Oi):Vt.enabled?new Fe(t,Vt):zt.enabled&&n.sameScheme?new Fe(t,zt):Qt.enabled()?new Qt(e,t):new Fe(t,ki)};V.prototype.doXhr=function(e,t){var n=this,r=$i.addPath(e,"/info");ne("doXhr",r),this.xo=V._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){ne("timeout"),n._cleanup(!1),n.emit("finish")},V.timeout),this.xo.once("finish",function(o,u){ne("finish",o,u),n._cleanup(!0),n.emit("finish",o,u)})};V.prototype._cleanup=function(e){ne("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};V.prototype.close=function(){ne("close"),this.removeAllListeners(),this._cleanup(!1)};V.timeout=8e3;var Ii=V,et,Kt;function Ti(){if(Kt)return et;Kt=1;var e=he.exports;function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,r){e.postMessage("c",JSON.stringify([n,r]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},et=t,et}var tt,Zt;function ji(){if(Zt)return tt;Zt=1;var e=A,t=Q.exports,n=Ti(),r=ar,o=he.exports,u=Kn,c=function(){};return c=x.exports("sockjs-client:iframe-bootstrap"),tt=function(l,f){var a={};f.forEach(function(i){i.facadeTransport&&(a[i.facadeTransport.transportName]=i.facadeTransport)}),a[r.transportName]=r;var s;l.bootstrap_iframe=function(){var i;o.currentWindowId=u.hash.slice(1);var h=function(p){if(p.source===parent&&(typeof s>"u"&&(s=p.origin),p.origin===s)){var m;try{m=JSON.parse(p.data)}catch(S){c("bad json",p.data);return}if(m.windowId===o.currentWindowId)switch(m.type){case"s":var b;try{b=JSON.parse(m.data)}catch(S){c("bad json",m.data);break}var v=b[0],C=b[1],_=b[2],w=b[3];if(c(v,C,_,w),v!==l.version)throw new Error('Incompatible SockJS! Main site uses: "'+v+'", the iframe: "'+l.version+'".');if(!e.isOriginEqual(_,u.href)||!e.isOriginEqual(w,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+_+", "+w+")");i=new n(new a[C](_,w));break;case"m":i._send(m.data);break;case"c":i&&i._close(),i=null;break}}};t.attachEvent("message",h),o.postMessage("s")}},tt}var Ni=ln,Ri=g.exports,Yt=ce,Fi=ai,me=A,Ai=Q.exports,Li=ci,Pi=Et,Ui=Ee,Mi=ui,It=Ot,hr=hn,Ae=Kn,Bi=fi,en=pi,Wi=Ii,E=function(){};E=x.exports("sockjs-client:main");var pr;function y(e,t,n){if(!(this instanceof y))return new y(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");hr.call(this),this.readyState=y.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&Mi.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return Yt.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=n.server||Yt.numberString(1e3);var o=new Ni(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if(o.protocol!=="http:"&&o.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var u=o.protocol==="https:";if(Ae.protocol==="https:"&&!u&&!me.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach(function(f,a){if(!f)throw new SyntaxError("The protocols entry '"+f+"' is invalid.");if(a<c.length-1&&f===c[a+1])throw new SyntaxError("The protocols entry '"+f+"' is duplicated.")});var l=me.getOrigin(Ae.href);this._origin=l?l.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,E("using url",this.url),this._urlInfo={nullOrigin:!Ui.hasDomain(),sameOrigin:me.isOriginEqual(this.url,Ae.href),sameScheme:me.isSchemeEqual(this.url,Ae.href)},this._ir=new Wi(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Ri(y,hr);function dr(e){return e===1e3||e>=3e3&&e<=4999}y.prototype.close=function(e,t){if(e&&!dr(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===y.CLOSING||this.readyState===y.CLOSED)){var n=!0;this._close(e||1e3,t||"Normal closure",n)}};y.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===y.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===y.OPEN&&this._transport.send(Fi.quote(e))};y.version=Fn();y.CONNECTING=0;y.OPEN=1;y.CLOSING=2;y.CLOSED=3;y.prototype._receiveInfo=function(e,t){if(E("_receiveInfo",t),this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=Pi.extend(e,this._urlInfo),E("info",e);var n=pr.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,E(this._transports.length+" enabled transports"),this._connect()};y.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(E("attempt",e.transportName),e.needBody&&(!d.document.body||typeof d.document.readyState<"u"&&d.document.readyState!=="complete"&&d.document.readyState!=="interactive")){E("waiting for body"),this._transports.unshift(e),Ai.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),E("using timeout",t);var n=me.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[e.transportName];E("transport url",n);var o=new e(n,this._transUrl,r);o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,this._transport=o;return}this._close(2e3,"All transports failed",!1)};y.prototype._transportTimeout=function(){E("_transportTimeout"),this.readyState===y.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};y.prototype._transportMessage=function(e){E("_transportMessage",e);var t=this,n=e.slice(0,1),r=e.slice(1),o;switch(n){case"o":this._open();return;case"h":this.dispatchEvent(new It("heartbeat")),E("heartbeat",this.transport);return}if(r)try{o=JSON.parse(r)}catch(u){E("bad json",r)}if(typeof o>"u"){E("empty payload",r);return}switch(n){case"a":Array.isArray(o)&&o.forEach(function(u){E("message",t.transport,u),t.dispatchEvent(new en(u))});break;case"m":E("message",this.transport,o),this.dispatchEvent(new en(o));break;case"c":Array.isArray(o)&&o.length===2&&this._close(o[0],o[1],!0);break}};y.prototype._transportClose=function(e,t){if(E("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!dr(e)&&e!==2e3&&this.readyState===y.CONNECTING){this._connect();return}this._close(e,t)};y.prototype._open=function(){E("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===y.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=y.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new It("open")),E("connected",this.transport)):this._close(1006,"Server lost session")};y.prototype._close=function(e,t,n){E("_close",this.transport,e,t,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===y.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=y.CLOSING,setTimeout(function(){this.readyState=y.CLOSED,r&&this.dispatchEvent(new It("error"));var o=new Bi;o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null,E("disconnected")}.bind(this),0)};y.prototype.countRTO=function(e){return e>100?4*e:300+e};var qi=function(e){return pr=Li(e),ji()(y,e),y},Di=Qo,Xi=qi(Di);"_sockjs_onload"in d&&setTimeout(d._sockjs_onload,1);var Je={exports:{}},Tt={};(function(e){(function(){var t,n,r,o,u={}.hasOwnProperty,c=[].slice;t={LF:`
`,NULL:"\0"},r=function(){var l;function f(a,s,i){this.command=a,this.headers=s!=null?s:{},this.body=i!=null?i:""}return f.prototype.toString=function(){var a,s,i,h,p;a=[this.command],i=this.headers["content-length"]===!1,i&&delete this.headers["content-length"],p=this.headers;for(s in p)!u.call(p,s)||(h=p[s],a.push(""+s+":"+h));return this.body&&!i&&a.push("content-length:"+f.sizeOfUTF8(this.body)),a.push(t.LF+this.body),a.join(t.LF)},f.sizeOfUTF8=function(a){return a?encodeURI(a).match(/%..|./g).length:0},l=function(a){var s,i,h,p,m,b,v,C,_,w,S,J,j,N,pe,Y,k;for(p=a.search(RegExp(""+t.LF+t.LF)),m=a.substring(0,p).split(t.LF),h=m.shift(),b={},J=function(I){return I.replace(/^\s+|\s+$/g,"")},Y=m.reverse(),j=0,pe=Y.length;j<pe;j++)w=Y[j],C=w.indexOf(":"),b[J(w.substring(0,C))]=J(w.substring(C+1));if(s="",S=p+2,b["content-length"])_=parseInt(b["content-length"]),s=(""+a).substring(S,S+_);else for(i=null,v=N=S,k=a.length;(S<=k?N<k:N>k)&&(i=a.charAt(v),i!==t.NULL);v=S<=k?++N:--N)s+=i;return new f(h,b,s)},f.unmarshall=function(a){var s;return function(){var i,h,p,m;for(p=a.split(RegExp(""+t.NULL+t.LF+"*")),m=[],i=0,h=p.length;i<h;i++)s=p[i],(s!=null?s.length:void 0)>0&&m.push(l(s));return m}()},f.marshall=function(a,s,i){var h;return h=new f(a,s,i),h.toString()+t.NULL},f}(),n=function(){var l;function f(a){this.ws=a,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return f.prototype.debug=function(a){var s;return typeof window<"u"&&window!==null&&(s=window.console)!=null?s.log(a):void 0},l=function(){return Date.now?Date.now():new Date().valueOf},f.prototype._transmit=function(a,s,i){var h;for(h=r.marshall(a,s,i),typeof this.debug=="function"&&this.debug(">>> "+h);;)if(h.length>this.maxWebSocketFrameSize)this.ws.send(h.substring(0,this.maxWebSocketFrameSize)),h=h.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+h.length);else return this.ws.send(h)},f.prototype._setupHeartbeat=function(a){var s,i,h,p,m,b;if(!((m=a.version)!==o.VERSIONS.V1_1&&m!==o.VERSIONS.V1_2)&&(b=function(){var v,C,_,w;for(_=a["heart-beat"].split(","),w=[],v=0,C=_.length;v<C;v++)p=_[v],w.push(parseInt(p));return w}(),i=b[0],s=b[1],this.heartbeat.outgoing===0||s===0||(h=Math.max(this.heartbeat.outgoing,s),typeof this.debug=="function"&&this.debug("send PING every "+h+"ms"),this.pinger=o.setInterval(h,function(v){return function(){return v.ws.send(t.LF),typeof v.debug=="function"?v.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||i===0)))return h=Math.max(this.heartbeat.incoming,i),typeof this.debug=="function"&&this.debug("check PONG every "+h+"ms"),this.ponger=o.setInterval(h,function(v){return function(){var C;if(C=l()-v.serverActivity,C>h*2)return typeof v.debug=="function"&&v.debug("did not receive server activity for the last "+C+"ms"),v.ws.close()}}(this))},f.prototype._parseConnect=function(){var a,s,i,h;switch(a=1<=arguments.length?c.call(arguments,0):[],h={},a.length){case 2:h=a[0],s=a[1];break;case 3:a[1]instanceof Function?(h=a[0],s=a[1],i=a[2]):(h.login=a[0],h.passcode=a[1],s=a[2]);break;case 4:h.login=a[0],h.passcode=a[1],s=a[2],i=a[3];break;default:h.login=a[0],h.passcode=a[1],s=a[2],i=a[3],h.host=a[4]}return[h,s,i]},f.prototype.connect=function(){var a,s,i,h;return a=1<=arguments.length?c.call(arguments,0):[],h=this._parseConnect.apply(this,a),i=h[0],this.connectCallback=h[1],s=h[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(p){return function(m){var b,v,C,_,w,S,J,j,N,pe,Y,k;if(_=typeof ArrayBuffer<"u"&&m.data instanceof ArrayBuffer?(b=new Uint8Array(m.data),typeof p.debug=="function"&&p.debug("--- got data length: "+b.length),function(){var I,jt,Ge;for(Ge=[],I=0,jt=b.length;I<jt;I++)v=b[I],Ge.push(String.fromCharCode(v));return Ge}().join("")):m.data,p.serverActivity=l(),_===t.LF){typeof p.debug=="function"&&p.debug("<<< PONG");return}for(typeof p.debug=="function"&&p.debug("<<< "+_),Y=r.unmarshall(_),k=[],N=0,pe=Y.length;N<pe;N++)switch(w=Y[N],w.command){case"CONNECTED":typeof p.debug=="function"&&p.debug("connected to server "+w.headers.server),p.connected=!0,p._setupHeartbeat(w.headers),k.push(typeof p.connectCallback=="function"?p.connectCallback(w):void 0);break;case"MESSAGE":j=w.headers.subscription,J=p.subscriptions[j]||p.onreceive,J?(C=p,S=w.headers["message-id"],w.ack=function(I){return I==null&&(I={}),C.ack(S,j,I)},w.nack=function(I){return I==null&&(I={}),C.nack(S,j,I)},k.push(J(w))):k.push(typeof p.debug=="function"?p.debug("Unhandled received MESSAGE: "+w):void 0);break;case"RECEIPT":k.push(typeof p.onreceipt=="function"?p.onreceipt(w):void 0);break;case"ERROR":k.push(typeof s=="function"?s(w):void 0);break;default:k.push(typeof p.debug=="function"?p.debug("Unhandled frame: "+w):void 0)}return k}}(this),this.ws.onclose=function(p){return function(){var m;return m="Whoops! Lost connection to "+p.ws.url,typeof p.debug=="function"&&p.debug(m),p._cleanUp(),typeof s=="function"?s(m):void 0}}(this),this.ws.onopen=function(p){return function(){return typeof p.debug=="function"&&p.debug("Web Socket Opened..."),i["accept-version"]=o.VERSIONS.supportedVersions(),i["heart-beat"]=[p.heartbeat.outgoing,p.heartbeat.incoming].join(","),p._transmit("CONNECT",i)}}(this)},f.prototype.disconnect=function(a,s){return s==null&&(s={}),this._transmit("DISCONNECT",s),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof a=="function"?a():void 0},f.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},f.prototype.send=function(a,s,i){return s==null&&(s={}),i==null&&(i=""),s.destination=a,this._transmit("SEND",s,i)},f.prototype.subscribe=function(a,s,i){var h;return i==null&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=a,this.subscriptions[i.id]=s,this._transmit("SUBSCRIBE",i),h=this,{id:i.id,unsubscribe:function(){return h.unsubscribe(i.id)}}},f.prototype.unsubscribe=function(a){return delete this.subscriptions[a],this._transmit("UNSUBSCRIBE",{id:a})},f.prototype.begin=function(a){var s,i;return i=a||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),s=this,{id:i,commit:function(){return s.commit(i)},abort:function(){return s.abort(i)}}},f.prototype.commit=function(a){return this._transmit("COMMIT",{transaction:a})},f.prototype.abort=function(a){return this._transmit("ABORT",{transaction:a})},f.prototype.ack=function(a,s,i){return i==null&&(i={}),i["message-id"]=a,i.subscription=s,this._transmit("ACK",i)},f.prototype.nack=function(a,s,i){return i==null&&(i={}),i["message-id"]=a,i.subscription=s,this._transmit("NACK",i)},f}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(l,f){var a,s;return f==null&&(f=["v10.stomp","v11.stomp"]),a=o.WebSocketClass||WebSocket,s=new a(l,f),new n(s)},over:function(l){return new n(l)},Frame:r},e!==null&&(e.Stomp=o),typeof window<"u"&&window!==null?(o.setInterval=function(l,f){return window.setInterval(f,l)},o.clearInterval=function(l){return window.clearInterval(l)},window.Stomp=o):e||(self.Stomp=o)}).call(d)})(Tt);var mt={};const Hi=new Proxy({},{get(e,t){throw new Error(`Module "net" has been externalized for browser compatibility. Cannot access "net.${t}" in client code.`)}}),Ji=Object.freeze(Object.defineProperty({__proto__:null,default:Hi},Symbol.toStringTag,{value:"Module"})),Gi=br(Ji);var nt,tn;function zi(){if(tn)return nt;tn=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return nt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),nt}const Vi="websocket",Qi="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ki=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Zi="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Yi=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],es="1.0.35",ts={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ns="https://github.com/theturtle32/WebSocket-Node",rs={node:">=4.0.0"},os={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},is={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},ss={verbose:!1},as={test:"tape test/unit/*.js",gulp:"gulp"},cs="index",us={lib:"./lib"},ls="lib/browser.js",fs="Apache-2.0",hs={name:Vi,description:Qi,keywords:Ki,author:Zi,contributors:Yi,version:es,repository:ts,homepage:ns,engines:rs,dependencies:os,devDependencies:is,config:ss,scripts:as,main:cs,directories:us,browser:ls,license:fs};var rt,nn;function ps(){return nn||(nn=1,rt=hs.version),rt}var ot,rn;function ds(){if(rn)return ot;rn=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=zi()}catch(o){}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=ps();function r(o,u){var c;return u?c=new t(o,u):c=new t(o),c}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(o){Object.defineProperty(r,o,{get:function(){return t[o]}})}),ot={w3cwebsocket:t?r:null,version:n},ot}(function(){var e,t,n,r,o,u;e=Tt,t=Gi,e.Stomp.setInterval=function(c,l){return setInterval(l,c)},e.Stomp.clearInterval=function(c){return clearInterval(c)},o=function(c,l){var f,a;return f=null,a={url:"tcp:// "+l+":"+c,send:function(s){return f.write(s)},close:function(){return f.end()}},f=t.connect(c,l,function(s){return a.onopen()}),f.on("error",function(s){return typeof a.onclose=="function"?a.onclose(s):void 0}),f.on("close",function(s){return typeof a.onclose=="function"?a.onclose(s):void 0}),f.on("data",function(s){var i;return i={data:s.toString()},a.onmessage(i)}),a},u=function(c){var l,f,a,s;return l=ds().client,f=null,s={url:c,send:function(i){return f.sendUTF(i)},close:function(){return f.close()}},a=new l,a.on("connect",function(i){return f=i,s.onopen(),f.on("error",function(h){return typeof s.onclose=="function"?s.onclose(h):void 0}),f.on("close",function(){return typeof s.onclose=="function"?s.onclose():void 0}),f.on("message",function(h){var p;if(h.type==="utf8")return p={data:h.utf8Data},s.onmessage(p)})}),a.connect(c),s},n=function(c,l){var f;return f=o(l,c),e.Stomp.over(f)},r=function(c){var l;return l=u(c),e.Stomp.over(l)},mt.overTCP=n,mt.overWS=r}).call(d);var ms=Tt,mr=mt;Je.exports=ms.Stomp;Je.exports.overTCP=mr.overTCP;Je.exports.overWS=mr.overWS;const vs={data(){return{friendId:null,stompClient:null,username:"",message:"",messages:[]}},created(){this.friendId=this.$route.params.id},mounted(){this.connect()},methods:{connect(){const e=new Xi("http://localhost:9998/chat");this.stompClient=Je.exports.over(e),wr(),this.stompClient.connect({},t=>{console.log("Connected: "+t);const n=11,r=this.friendId;this.stompClient.subscribe(`/topic/chat/${n}/${r}`,o=>{this.showMessage(JSON.parse(o.body))}),this.stompClient.subscribe(`/topic/chat/${r}/${n}`,o=>{this.showMessage(JSON.parse(o.body))}),this.stompClient.send(`/app/chat.addUser/${n}/${r}`,{},JSON.stringify({sender:n,type:"JOIN",friendId:r}))},t=>{console.error("Error connecting to WebSocket:",t)})},sendMessage(){const e=this.message.trim();if(e&&this.stompClient){const t={sender:this.username,content:e,type:"CHAT"};this.stompClient.send(`/app/chat.sendMessage/${userId}/${friendId}`,{},JSON.stringify(t)),this.message=""}},showMessage(e){this.messages.push(e)},formatMessage(e){return e.type==="JOIN"?`${e.sender} joined the chat`:e.type==="CHAT"?`${e.sender}: ${e.content}`:""}}};var vr=function(){var t=this,n=t._self._c;return n("div",{staticClass:"chat-container"},[t._m(0),n("div",{staticClass:"chat-box"},[n("ul",{attrs:{id:"chat"}},t._l(t.messages,function(r,o){return n("li",{key:o,class:["chat-message",r.type==="JOIN"?"join-message":r.sender===t.username?"user-message":"friend-message"]},[t._v(" "+t._s(t.formatMessage(r))+" ")])}),0)]),n("div",{staticClass:"message-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input-field",attrs:{placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(r){r.target.composing||(t.message=r.target.value)}}}),n("button",{staticClass:"send-btn",on:{click:t.sendMessage}},[t._v("Send")])])])},gs=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("h3",[e._v("Chat")])])}];vr._withStripped=!0;var gr=yr(vs,vr,gs,!1,null,"db7b52ac",null,null);gr.options.__file="F:/GitHub/bruce-cxm-douyin/douyin_vue2/src/views/xiaoxi/xiaoxitdetail.vue";const ws=gr.exports;export{ws as default};
