!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}System.register(["./index-legacy.7979773c.js","./token-legacy.631a5ce2.js"],(function(e,n){"use strict";var r,o,i,s,a=document.createElement("style");return a.textContent=".chat-container[data-v-b5cf9f5b]{display:flex;flex-direction:column;height:100vh;background:#f7f7f7}.header[data-v-b5cf9f5b]{background-color:#fff;padding:10px 20px;text-align:center;font-size:18px;font-weight:700;box-shadow:0 2px 5px rgba(0,0,0,.1)}.chat-box[data-v-b5cf9f5b]{flex:1;padding:10px;overflow-y:auto;background:#ffffff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin:10px}#chat[data-v-b5cf9f5b]{list-style:none;padding:0}.chat-message[data-v-b5cf9f5b]{margin-bottom:15px;font-size:16px;word-wrap:break-word;line-height:1.5;border-radius:20px;padding:10px 15px;max-width:70%}.user-message[data-v-b5cf9f5b]{background-color:#dcf8c6;align-self:flex-start;border-top-left-radius:0;border-bottom-left-radius:0}.friend-message[data-v-b5cf9f5b]{background-color:#fff;border:1px solid #ccc;align-self:flex-end;border-top-right-radius:0;border-bottom-right-radius:0}.join-message[data-v-b5cf9f5b]{font-style:italic;color:#888;text-align:center;padding:5px}.message-input[data-v-b5cf9f5b]{display:flex;padding:10px;background-color:#fff;box-shadow:0 -2px 5px rgba(0,0,0,.1);position:sticky;bottom:0;z-index:1000}.input-field[data-v-b5cf9f5b]{flex:1;padding:12px;border-radius:20px;border:1px solid #ccc;font-size:16px;background-color:#f1f1f1;margin-right:10px}.send-btn[data-v-b5cf9f5b]{background-color:#4caf50;color:#fff;border:none;border-radius:20px;padding:12px 15px;font-size:16px;cursor:pointer}.send-btn[data-v-b5cf9f5b]:hover{background-color:#45a049}input[data-v-b5cf9f5b]:focus,button[data-v-b5cf9f5b]:focus{outline:none}\n",document.head.appendChild(a),{setters:[function(t){r=t.c,o=t.g,i=t.n},function(t){s=t.u}],execute:function(){var n={exports:{}},a={};r.crypto&&r.crypto.getRandomValues?a.randomBytes=function(t){var e=new Uint8Array(t);return r.crypto.getRandomValues(e),e}:a.randomBytes=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=Math.floor(256*Math.random());return e};var c=a,u="abcdefghijklmnopqrstuvwxyz012345",l={string:function(t){for(var e=c.randomBytes(t),n=[],r=0;r<t;r++)n.push(u.substr(e[r]%32,1));return n.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length;return(new Array(e+1).join("0")+this.number(t)).slice(-e)}};!function(t){var e=l,n={},o=!1,i=r.chrome&&r.chrome.app&&r.chrome.app.runtime;t.exports={attachEvent:function(t,e){void 0!==r.addEventListener?r.addEventListener(t,e,!1):r.document&&r.attachEvent&&(r.document.attachEvent("on"+t,e),r.attachEvent("on"+t,e))},detachEvent:function(t,e){void 0!==r.addEventListener?r.removeEventListener(t,e,!1):r.document&&r.detachEvent&&(r.document.detachEvent("on"+t,e),r.detachEvent("on"+t,e))},unloadAdd:function(t){if(i)return null;var r=e.string(8);return n[r]=t,o&&setTimeout(this.triggerUnloadCallbacks,0),r},unloadDel:function(t){t in n&&delete n[t]},triggerUnloadCallbacks:function(){for(var t in n)n[t](),delete n[t]}};i||t.exports.attachEvent("unload",(function(){o||(o=!0,t.exports.triggerUnloadCallbacks())}))}(n);var h={},p=Object.prototype.hasOwnProperty;function f(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function d(t){try{return encodeURIComponent(t)}catch(e){return null}}h.stringify=function(t,e){e=e||"";var n,r,o=[];for(r in"string"!=typeof e&&(e="?"),t)if(p.call(t,r)){if((n=t[r])||null!=n&&!isNaN(n)||(n=""),r=d(r),n=d(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?e+o.join("&"):""},h.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,r={};e=n.exec(t);){var o=f(e[1]),i=f(e[2]);null===o||null===i||o in r||(r[o]=i)}return r};var m=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},b=h,v=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,g=/[\n\r\t]/g,y=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,w=/:\d+$/,x=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,_=/^[a-zA-Z]:/;function E(t){return(t||"").toString().replace(v,"")}var S=[["#","hash"],["?","query"],function(t,e){return T(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],O={hash:1,query:1};function C(e){var n,o=("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).location||{},i={},s=t(e=e||o);if("blob:"===e.protocol)i=new N(unescape(e.pathname),{});else if("string"===s)for(n in i=new N(e,{}),O)delete i[n];else if("object"===s){for(n in e)n in O||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=y.test(e.href))}return i}function T(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function k(t,e){t=(t=E(t)).replace(g,""),e=e||{};var n,r=x.exec(t),o=r[1]?r[1].toLowerCase():"",i=!!r[2],s=!!r[3],a=0;return i?s?(n=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(n=r[2]+r[4],a=r[2].length):s?(n=r[3]+r[4],a=r[3].length):n=r[4],"file:"===o?a>=2&&(n=n.slice(2)):T(o)?n=r[4]:o?i&&(n=n.slice(2)):a>=2&&T(e.protocol)&&(n=r[4]),{protocol:o,slashes:i||T(o),slashesCount:a,rest:n}}function N(e,n,r){if(e=(e=E(e)).replace(g,""),!(this instanceof N))return new N(e,n,r);var o,i,s,a,c,u,l=S.slice(),h=t(n),p=this,f=0;for("object"!==h&&"string"!==h&&(r=n,n=null),r&&"function"!=typeof r&&(r=b.parse),o=!(i=k(e||"",n=C(n))).protocol&&!i.slashes,p.slashes=i.slashes||o&&n.slashes,p.protocol=i.protocol||n.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||_.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!T(p.protocol)))&&(l[3]=[/(.*)/,"pathname"]);f<l.length;f++)"function"!=typeof(a=l[f])?(s=a[0],u=a[1],s!=s?p[u]=e:"string"==typeof s?~(c="@"===s?e.lastIndexOf(s):e.indexOf(s))&&("number"==typeof a[2]?(p[u]=e.slice(0,c),e=e.slice(c+a[2])):(p[u]=e.slice(c),e=e.slice(0,c))):(c=s.exec(e))&&(p[u]=c[1],e=e.slice(0,c.index)),p[u]=p[u]||o&&a[3]&&n[u]||"",a[4]&&(p[u]=p[u].toLowerCase())):e=a(e,p);r&&(p.query=r(p.query)),o&&n.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==n.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],i=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(i=!0),n.splice(r,1),s--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(p.pathname,n.pathname)),"/"!==p.pathname.charAt(0)&&T(p.protocol)&&(p.pathname="/"+p.pathname),m(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(~(c=p.auth.indexOf(":"))?(p.username=p.auth.slice(0,c),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=p.auth.slice(c+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(p.auth)),p.auth=p.password?p.username+":"+p.password:p.username),p.origin="file:"!==p.protocol&&T(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString()}N.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||b.parse)(e)),r[t]=e;break;case"port":r[t]=e,m(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,w.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";r[t]=e.charAt(0)!==o?o+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var i=e.indexOf(":");~i?(r.username=e.slice(0,i),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(i+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var s=0;s<S.length;s++){var a=S[s];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&T(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=b.stringify);var n,r=this,o=r.host,i=r.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var s=i+(r.protocol&&r.slashes||T(r.protocol)?"//":"");return r.username?(s+=r.username,r.password&&(s+=":"+r.password),s+="@"):r.password?(s+=":"+r.password,s+="@"):"file:"!==r.protocol&&T(r.protocol)&&!o&&"/"!==r.pathname&&(s+="@"),(":"===o[o.length-1]||w.test(r.hostname)&&!r.port)&&(o+=":"),s+=o+r.pathname,(n="object"===t(r.query)?e(r.query):r.query)&&(s+="?"!==n.charAt(0)?"?"+n:n),r.hash&&(s+=r.hash),s}},N.extractProtocol=k,N.location=C,N.trimLeft=E,N.qs=b;var I=N,j=I,A={getOrigin:function(t){if(!t)return null;var e=new j(t);if("file:"===e.protocol)return null;var n=e.port;return n||(n="https:"===e.protocol?"443":"80"),e.protocol+"//"+e.hostname+":"+n},isOriginEqual:function(t,e){return this.getOrigin(t)===this.getOrigin(e)},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var n=t.split("?");return n[0]+e+(n[1]?"?"+n[1]:"")},addQuery:function(t,e){return t+(-1===t.indexOf("?")?"?"+e:"&"+e)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},R={exports:{}};"function"==typeof Object.create?R.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:R.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}};var L={};function P(){this._listeners={}}P.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},P.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);-1===r||(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t])}},P.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,n),e in this._listeners)for(var r=this._listeners[e],o=0;o<r.length;o++)r[o].apply(this,n)};var U=P,M=R.exports,W=U;function D(){W.call(this)}M(D,W),D.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},D.prototype.once=function(t,e){var n=this,r=!1;this.on(t,(function o(){n.removeListener(t,o),r||(r=!0,e.apply(this,arguments))}))},D.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<e.length;i++)e[i].apply(this,r)}},D.prototype.on=D.prototype.addListener=W.prototype.addEventListener,D.prototype.removeListener=W.prototype.removeEventListener,L.EventEmitter=D;var B={exports:{}},F=r.WebSocket||r.MozWebSocket;B.exports=F?function(t){return new F(t)}:void 0;var q=n.exports,J=A,G=R.exports,z=L.EventEmitter,H=B.exports;function V(t,e,n){if(!V.enabled())throw new Error("Transport created when disabled");z.call(this);var r=this,o=J.addPath(t,"/websocket");o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),this.url=o,this.ws=new H(this.url,[],n),this.ws.onmessage=function(t){t.data,r.emit("message",t.data)},this.unloadRef=q.unloadAdd((function(){r.ws.close()})),this.ws.onclose=function(t){t.code,t.reason,r.emit("close",t.code,t.reason),r._cleanup()},this.ws.onerror=function(t){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}G(V,z),V.prototype.send=function(t){var e="["+t+"]";this.ws.send(e)},V.prototype.close=function(){var t=this.ws;this._cleanup(),t&&t.close()},V.prototype._cleanup=function(){var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),q.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},V.enabled=function(){return!!H},V.transportName="websocket",V.roundTrips=2;var Q=V,X=R.exports,$=L.EventEmitter;function K(t,e){$.call(this),this.sendBuffer=[],this.sender=e,this.url=t}X(K,$),K.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},K.prototype.sendScheduleWait=function(){var t,e=this;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout((function(){e.sendStop=null,e.sendSchedule()}),25)},K.prototype.sendSchedule=function(){this.sendBuffer.length;var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,(function(e){t.sendStop=null,e?(t.emit("close",e.code||1006,"Sending error: "+e),t.close()):t.sendScheduleWait()})),this.sendBuffer=[]}},K.prototype._cleanup=function(){this.removeAllListeners()},K.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var Z=K,Y=R.exports,tt=L.EventEmitter;function et(t,e,n){tt.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}Y(et,tt),et.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",(function(e){t.emit("message",e)})),e.once("close",(function(n,r){t.pollIsClosing,t.poll=e=null,t.pollIsClosing||("network"===r?t._scheduleReceiver():(t.emit("close",n||1006,r),t.removeAllListeners()))}))},et.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var nt=et,rt=R.exports,ot=A,it=Z,st=nt;function at(t,e,n,r,o){var i=ot.addPath(t,e),s=this;it.call(this,t,n),this.poll=new st(r,i,o),this.poll.on("message",(function(t){s.emit("message",t)})),this.poll.once("close",(function(t,e){s.poll=null,s.emit("close",t,e),s.close()}))}rt(at,it),at.prototype.close=function(){it.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var ct=at,ut=R.exports,lt=A,ht=ct;function pt(t,e,n,r){ht.call(this,t,e,function(t){return function(e,n,r){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var i=lt.addPath(e,"/xhr_send"),s=new t("POST",i,n,o);return s.once("finish",(function(t){if(s=null,200!==t&&204!==t)return r(new Error("http status "+t));r()})),function(){s.close(),s=null;var t=new Error("Aborted");t.code=1e3,r(t)}}}(r),n,r)}ut(pt,ht);var ft=pt,dt=R.exports,mt=L.EventEmitter;function bt(t,e){mt.call(this);var n=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(t,e){n._chunkHandler(t,e),n.xo=null;var r=200===t?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}dt(bt,mt),bt.prototype._chunkHandler=function(t,e){if(200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var r=e.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&this.emit("message",o)}},bt.prototype._cleanup=function(){this.removeAllListeners()},bt.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var vt=bt,gt=L.EventEmitter,yt=R.exports,wt=n.exports,xt=A,_t=r.XMLHttpRequest;function Et(t,e,n,r){var o=this;gt.call(this),setTimeout((function(){o._start(t,e,n,r)}),0)}yt(Et,gt),Et.prototype._start=function(t,e,n,r){var o=this;try{this.xhr=new _t}catch(s){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();e=xt.addQuery(e,"t="+ +new Date),this.unloadRef=wt.unloadAdd((function(){o._cleanup(!0)}));try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(a){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!Et.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var i in r.headers)this.xhr.setRequestHeader(i,r.headers[i]);this.xhr.onreadystatechange=function(){if(o.xhr){var t,e,n=o.xhr;switch(n.readyState,n.readyState){case 3:try{e=n.status,t=n.responseText}catch(a){}1223===e&&(e=204),200===e&&t&&t.length>0&&o.emit("chunk",e,t);break;case 4:1223===(e=n.status)&&(e=204),12005!==e&&12029!==e||(e=0),n.responseText,o.emit("finish",e,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(a){o.emit("finish",0,""),o._cleanup(!1)}},Et.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),wt.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},Et.prototype.close=function(){this._cleanup(!0)},Et.enabled=!!_t;var St=["Active"].concat("Object").join("X");!Et.enabled&&St in r&&(_t=function(){try{return new r[St]("Microsoft.XMLHTTP")}catch(t){return null}},Et.enabled=!!new _t);var Ot=!1;try{Ot="withCredentials"in new _t}catch(Po){}Et.supportsCORS=Ot;var Ct=Et,Tt=R.exports,kt=Ct;function Nt(t,e,n,r){kt.call(this,t,e,n,r)}Tt(Nt,kt),Nt.enabled=kt.enabled&&kt.supportsCORS;var It=Nt,jt=R.exports,At=Ct;function Rt(t,e,n){At.call(this,t,e,n,{noCredentials:!0})}jt(Rt,At),Rt.enabled=At.enabled;var Lt=Rt,Pt={isOpera:function(){return r.navigator&&/opera/i.test(r.navigator.userAgent)},isKonqueror:function(){return r.navigator&&/konqueror/i.test(r.navigator.userAgent)},hasDomain:function(){if(!r.document)return!0;try{return!!r.document.domain}catch(t){return!1}}},Ut=R.exports,Mt=ft,Wt=vt,Dt=It,Bt=Lt,Ft=Pt;function qt(t){if(!Bt.enabled&&!Dt.enabled)throw new Error("Transport created when disabled");Mt.call(this,t,"/xhr_streaming",Wt,Dt)}Ut(qt,Mt),qt.enabled=function(t){return!t.nullOrigin&&(!Ft.isOpera()&&Dt.enabled)},qt.transportName="xhr-streaming",qt.roundTrips=2,qt.needBody=!!r.document;var Jt=qt,Gt=L.EventEmitter,zt=R.exports,Ht=n.exports,Vt=Pt,Qt=A;function Xt(t,e,n){var r=this;Gt.call(this),setTimeout((function(){r._start(t,e,n)}),0)}zt(Xt,Gt),Xt.prototype._start=function(t,e,n){var o=this,i=new r.XDomainRequest;e=Qt.addQuery(e,"t="+ +new Date),i.onerror=function(){o._error()},i.ontimeout=function(){o._error()},i.onprogress=function(){i.responseText,o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},this.xdr=i,this.unloadRef=Ht.unloadAdd((function(){o._cleanup(!0)}));try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(s){this._error()}},Xt.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},Xt.prototype._cleanup=function(t){if(this.xdr){if(this.removeAllListeners(),Ht.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},Xt.prototype.close=function(){this._cleanup(!0)},Xt.enabled=!(!r.XDomainRequest||!Vt.hasDomain());var $t=Xt,Kt=R.exports,Zt=ft,Yt=vt,te=$t;function ee(t){if(!te.enabled)throw new Error("Transport created when disabled");Zt.call(this,t,"/xhr_streaming",Yt,te)}Kt(ee,Zt),ee.enabled=function(t){return!t.cookie_needed&&!t.nullOrigin&&(te.enabled&&t.sameScheme)},ee.transportName="xdr-streaming",ee.roundTrips=2;var ne=ee,re=r.EventSource,oe=R.exports,ie=L.EventEmitter,se=re;function ae(t){ie.call(this);var e=this,n=this.es=new se(t);n.onmessage=function(t){t.data,e.emit("message",decodeURI(t.data))},n.onerror=function(t){n.readyState;var r=2!==n.readyState?"network":"permanent";e._cleanup(),e._close(r)}}oe(ae,ie),ae.prototype.abort=function(){this._cleanup(),this._close("user")},ae.prototype._cleanup=function(){var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},ae.prototype._close=function(t){var e=this;setTimeout((function(){e.emit("close",null,t),e.removeAllListeners()}),200)};var ce=ae,ue=R.exports,le=ft,he=ce,pe=It,fe=re;function de(t){if(!de.enabled())throw new Error("Transport created when disabled");le.call(this,t,"/eventsource",he,pe)}ue(de,le),de.enabled=function(){return!!fe},de.transportName="eventsource",de.roundTrips=2;var me,be,ve=de;function ge(){return be?me:(be=1,me="1.6.1")}var ye,we={exports:{}};function xe(){return ye||(ye=1,function(e){var o=n.exports,i=Pt;e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in r||(r[e.exports.WPrefix]={})},postMessage:function(t,n){r.parent!==r&&r.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:n||""}),"*")},createIframe:function(t,e){var n,i,s=r.document.createElement("iframe"),a=function(){clearTimeout(n);try{s.onload=null}catch(t){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),o.unloadDel(i))},u=function(t){s&&(c(),e(t))};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){clearTimeout(n),n=setTimeout((function(){u("onload timeout")}),2e3)},r.document.body.appendChild(s),n=setTimeout((function(){u("timeout")}),15e3),i=o.unloadAdd(c),{post:function(t,e){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(n){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,n){var i,s,a,c=["Active"].concat("Object").join("X"),u=new r[c]("htmlfile"),l=function(){clearTimeout(i),a.onerror=null},h=function(){u&&(l(),o.unloadDel(s),a.parentNode.removeChild(a),a=u=null,CollectGarbage())},p=function(t){u&&(h(),n(t))};u.open(),u.write('<html><script>document.domain="'+r.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=r[e.exports.WPrefix];var f=u.createElement("div");return u.body.appendChild(f),a=u.createElement("iframe"),f.appendChild(a),a.src=t,a.onerror=function(){p("onerror")},i=setTimeout((function(){p("timeout")}),15e3),s=o.unloadAdd(h),{post:function(t,e){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}),0)}catch(n){}},cleanup:h,loaded:l}}},e.exports.iframeEnabled=!1,r.document&&(e.exports.iframeEnabled=("function"==typeof r.postMessage||"object"===t(r.postMessage))&&!i.isKonqueror())}(we)),we.exports}var _e=R.exports,Ee=L.EventEmitter,Se=ge(),Oe=A,Ce=xe(),Te=n.exports,ke=l;function Ne(t,e,n){if(!Ne.enabled())throw new Error("Transport created when disabled");Ee.call(this);var r=this;this.origin=Oe.getOrigin(n),this.baseUrl=n,this.transUrl=e,this.transport=t,this.windowId=ke.string(8);var o=Oe.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=Ce.createIframe(o,(function(t){r.emit("close",1006,"Unable to load an iframe ("+t+")"),r.close()})),this.onmessageCallback=this._message.bind(this),Te.attachEvent("message",this.onmessageCallback)}_e(Ne,Ee),Ne.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){Te.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},Ne.prototype._message=function(t){if(t.data,!Oe.isOriginEqual(t.origin,this.origin))return t.origin,void this.origin;var e;try{e=JSON.parse(t.data)}catch(Po){return void t.data}if(e.windowId!==this.windowId)return e.windowId,void this.windowId;switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Se,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var n;try{n=JSON.parse(e.data)}catch(Po){return void e.data}this.emit("close",n[0],n[1]),this.close()}},Ne.prototype.postMessage=function(t,e){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)},Ne.prototype.send=function(t){this.postMessage("m",t)},Ne.enabled=function(){return Ce.iframeEnabled},Ne.transportName="iframe",Ne.roundTrips=2;var Ie=Ne,je={isObject:function(e){var n=t(e);return"function"===n||"object"===n&&!!e},extend:function(t){if(!this.isObject(t))return t;for(var e,n,r=1,o=arguments.length;r<o;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}},Ae=R.exports,Re=Ie,Le=je,Pe=function(t){function e(e,n){Re.call(this,t.transportName,e,n)}return Ae(e,Re),e.enabled=function(e,n){if(!r.document)return!1;var o=Le.extend({},n);return o.sameOrigin=!0,t.enabled(o)&&Re.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=Re.roundTrips+t.roundTrips-1,e.facadeTransport=t,e},Ue=R.exports,Me=xe(),We=A,De=L.EventEmitter,Be=l;function Fe(t){De.call(this);var e=this;Me.polluteGlobalNamespace(),this.id="a"+Be.string(6),t=We.addQuery(t,"c="+decodeURIComponent(Me.WPrefix+"."+this.id)),Fe.htmlfileEnabled;var n=Fe.htmlfileEnabled?Me.createHtmlfile:Me.createIframe;r[Me.WPrefix][this.id]={start:function(){e.iframeObj.loaded()},message:function(t){e.emit("message",t)},stop:function(){e._cleanup(),e._close("network")}},this.iframeObj=n(t,(function(){e._cleanup(),e._close("permanent")}))}Ue(Fe,De),Fe.prototype.abort=function(){this._cleanup(),this._close("user")},Fe.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r[Me.WPrefix][this.id]},Fe.prototype._close=function(t){this.emit("close",null,t),this.removeAllListeners()},Fe.htmlfileEnabled=!1;var qe=["Active"].concat("Object").join("X");if(qe in r)try{Fe.htmlfileEnabled=!!new r[qe]("htmlfile")}catch(Uo){}Fe.enabled=Fe.htmlfileEnabled||Me.iframeEnabled;var Je=Fe,Ge=R.exports,ze=Je,He=Lt,Ve=ft;function Qe(t){if(!ze.enabled)throw new Error("Transport created when disabled");Ve.call(this,t,"/htmlfile",ze,He)}Ge(Qe,Ve),Qe.enabled=function(t){return ze.enabled&&t.sameOrigin},Qe.transportName="htmlfile",Qe.roundTrips=2;var Xe=Qe,$e=R.exports,Ke=ft,Ze=vt,Ye=It,tn=Lt;function en(t){if(!tn.enabled&&!Ye.enabled)throw new Error("Transport created when disabled");Ke.call(this,t,"/xhr",Ze,Ye)}$e(en,Ke),en.enabled=function(t){return!t.nullOrigin&&(!(!tn.enabled||!t.sameOrigin)||Ye.enabled)},en.transportName="xhr-polling",en.roundTrips=2;var nn=en,rn=R.exports,on=ft,sn=ne,an=vt,cn=$t;function un(t){if(!cn.enabled)throw new Error("Transport created when disabled");on.call(this,t,"/xhr",an,cn)}rn(un,on),un.enabled=sn.enabled,un.transportName="xdr-polling",un.roundTrips=2;var ln=un,hn=xe(),pn=l,fn=Pt,dn=A,mn=R.exports,bn=L.EventEmitter;function vn(t){var e=this;bn.call(this),hn.polluteGlobalNamespace(),this.id="a"+pn.string(6);var n=dn.addQuery(t,"c="+encodeURIComponent(hn.WPrefix+"."+this.id));r[hn.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout((function(){e._abort(new Error("JSONP script loaded abnormally (timeout)"))}),vn.timeout)}mn(vn,bn),vn.prototype.abort=function(){if(r[hn.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},vn.timeout=35e3,vn.scriptErrorTimeout=1e3,vn.prototype._callback=function(t){this._cleanup(),this.aborting||(t&&this.emit("message",t),this.emit("close",null,"network"),this.removeAllListeners())},vn.prototype._abort=function(t){this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()},vn.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete r[hn.WPrefix][this.id]},vn.prototype._scriptError=function(){var t=this;this.errorTimer||(this.errorTimer=setTimeout((function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))}),vn.scriptErrorTimeout))},vn.prototype._createScript=function(t){var e,n=this,o=this.script=r.document.createElement("script");if(o.id="a"+pn.string(8),o.src=t,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){n._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(o.readyState,/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){n.loadedOkay=!0;try{o.onclick()}catch(Uo){}}o&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&r.document.attachEvent)if(fn.isOpera())(e=this.script2=r.document.createElement("script")).text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=e.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(Uo){}o.async=!0}void 0!==o.async&&(o.async=!0);var i=r.document.getElementsByTagName("head")[0];i.insertBefore(o,i.firstChild),e&&i.insertBefore(e,i.firstChild)};var gn,yn,wn=vn,xn=l,_n=A;var En=R.exports,Sn=ct,On=wn,Cn=function(t,e,n){gn||((gn=r.document.createElement("form")).style.display="none",gn.style.position="absolute",gn.method="POST",gn.enctype="application/x-www-form-urlencoded",gn.acceptCharset="UTF-8",(yn=r.document.createElement("textarea")).name="d",gn.appendChild(yn),r.document.body.appendChild(gn));var o="a"+xn.string(8);gn.target=o,gn.action=_n.addQuery(_n.addPath(t,"/jsonp_send"),"i="+o);var i=function(t){try{return r.document.createElement('<iframe name="'+t+'">')}catch(Uo){var e=r.document.createElement("iframe");return e.name=t,e}}(o);i.id=o,i.style.display="none",gn.appendChild(i);try{yn.value=e}catch(a){}gn.submit();var s=function(t){i.onerror&&(i.onreadystatechange=i.onerror=i.onload=null,setTimeout((function(){i.parentNode.removeChild(i),i=null}),500),yn.value="",n(t))};return i.onerror=function(){s()},i.onload=function(){s()},i.onreadystatechange=function(t){i.readyState,"complete"===i.readyState&&s()},function(){s(new Error("Aborted"))}};function Tn(t){if(!Tn.enabled())throw new Error("Transport created when disabled");Sn.call(this,t,"/jsonp",Cn,On)}En(Tn,Sn),Tn.enabled=function(){return!!r.document},Tn.transportName="jsonp-polling",Tn.roundTrips=1,Tn.needBody=!0;var kn,Nn=Tn,In=[Q,Jt,ne,ve,Pe(ve),Xe,Pe(Xe),nn,ln,Pe(nn),Nn],jn=Array.prototype,An=Object.prototype,Rn=Function.prototype,Ln=String.prototype,Pn=jn.slice,Un=An.toString,Mn=function(t){return"[object Function]"===An.toString.call(t)},Wn=function(t){return"[object String]"===Un.call(t)},Dn=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();kn=Dn?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var Bn=function(t,e,n){for(var r in e)An.hasOwnProperty.call(e,r)&&kn(t,r,e[r],n)},Fn=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};function qn(){}Bn(Rn,{bind:function(t){var e=this;if(!Mn(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=Pn.call(arguments,1),r=Math.max(0,e.length-n.length),o=[],i=0;i<r;i++)o.push("$"+i);var s=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof s){var r=e.apply(this,n.concat(Pn.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(Pn.call(arguments)))}));return e.prototype&&(qn.prototype=e.prototype,s.prototype=new qn,qn.prototype=null),s}}),Bn(Array,{isArray:function(t){return"[object Array]"===Un.call(t)}});var Jn,Gn,zn,Hn=Object("a"),Vn="a"!==Hn[0]||!(0 in Hn);Bn(jn,{forEach:function(t){var e=Fn(this),n=Vn&&Wn(this)?this.split(""):e,r=arguments[1],o=-1,i=n.length>>>0;if(!Mn(t))throw new TypeError;for(;++o<i;)o in n&&t.call(r,n[o],o,e)}},(Jn=jn.forEach,Gn=!0,zn=!0,Jn&&(Jn.call("foo",(function(e,n,r){"object"!==t(r)&&(Gn=!1)})),Jn.call([1],(function(){zn="string"==typeof this}),"x")),!(Jn&&Gn&&zn)));var Qn=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);Bn(jn,{indexOf:function(t){var e=Vn&&Wn(this)?this.split(""):Fn(this),n=e.length>>>0;if(!n)return-1;var r,o=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),o=r),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in e&&e[o]===t)return o;return-1}},Qn);var Xn,$n=Ln.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(Xn=void 0===/()??/.exec("")[1],Ln.split=function(t,e){var n=this;if(void 0===t&&0===e)return[];if("[object RegExp]"!==Un.call(t))return $n.call(this,t,e);var r,o,i,s,a=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),u=0;for(t=new RegExp(t.source,c+"g"),n+="",Xn||(r=new RegExp("^"+t.source+"$(?!\\s)",c)),e=void 0===e?-1>>>0:e>>>0;(o=t.exec(n))&&!((i=o.index+o[0].length)>u&&(a.push(n.slice(u,o.index)),!Xn&&o.length>1&&o[0].replace(r,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)})),o.length>1&&o.index<n.length&&jn.push.apply(a,o.slice(1)),s=o[0].length,u=i,a.length>=e));)t.lastIndex===o.index&&t.lastIndex++;return u===n.length?!s&&t.test("")||a.push(""):a.push(n.slice(u)),a.length>e?a.slice(0,e):a}):"0".split(void 0,0).length&&(Ln.split=function(t,e){return void 0===t&&0===e?[]:$n.call(this,t,e)});var Kn=Ln.substr,Zn="".substr&&"b"!=="0b".substr(-1);Bn(Ln,{substr:function(t,e){return Kn.call(this,t<0&&(t=this.length+t)<0?0:t,e)}},Zn);var Yn,tr=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,er={quote:function(t){var e=JSON.stringify(t);return tr.lastIndex=0,tr.test(e)?(Yn||(Yn=function(t){var e,n={},r=[];for(e=0;e<65536;e++)r.push(String.fromCharCode(e));return t.lastIndex=0,r.join("").replace(t,(function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""})),t.lastIndex=0,n}(tr)),e.replace(tr,(function(t){return Yn[t]}))):e}},nr={};["log","debug","warn"].forEach((function(t){var e;try{e=r.console&&r.console[t]&&r.console[t].apply}catch(n){}nr[t]=e?function(){return r.console[t].apply(r.console,arguments)}:"log"===t?function(){}:nr.log}));var rr=nr;function or(t){this.type=t}or.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},or.prototype.stopPropagation=function(){},or.prototype.preventDefault=function(){},or.CAPTURING_PHASE=1,or.AT_TARGET=2,or.BUBBLING_PHASE=3;var ir=or,sr=r.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},ar=R.exports,cr=ir;function ur(){cr.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}ar(ur,cr);var lr=ur,hr=R.exports,pr=ir;function fr(t){pr.call(this),this.initEvent("message",!1,!1),this.data=t}hr(fr,pr);var dr=fr,mr=L.EventEmitter;function br(){var t=this;mr.call(this),this.to=setTimeout((function(){t.emit("finish",200,"{}")}),br.timeout)}(0,R.exports)(br,mr),br.prototype.close=function(){clearTimeout(this.to)},br.timeout=2e3;var vr=br,gr=L.EventEmitter,yr=R.exports,wr=je;function xr(t,e){gr.call(this);var n=this,r=+new Date;this.xo=new e("GET",t),this.xo.once("finish",(function(t,e){var o,i;if(200===t){if(i=+new Date-r,e)try{o=JSON.parse(e)}catch(s){}wr.isObject(o)||(o={})}n.emit("finish",o,i),n.removeAllListeners()}))}yr(xr,gr),xr.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var _r=xr,Er=R.exports,Sr=L.EventEmitter,Or=Lt,Cr=_r;function Tr(t){var e=this;Sr.call(this),this.ir=new Cr(t,Or),this.ir.once("finish",(function(t,n){e.ir=null,e.emit("message",JSON.stringify([t,n]))}))}Er(Tr,Sr),Tr.transportName="iframe-info-receiver",Tr.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var kr=Tr,Nr=L.EventEmitter,Ir=R.exports,jr=n.exports,Ar=Ie,Rr=kr;function Lr(t,e){var n=this;Nr.call(this);var o=function(){var r=n.ifr=new Ar(Rr.transportName,e,t);r.once("message",(function(t){if(t){var e;try{e=JSON.parse(t)}catch(i){return n.emit("finish"),void n.close()}var r=e[0],o=e[1];n.emit("finish",r,o)}n.close()})),r.once("close",(function(){n.emit("finish"),n.close()}))};r.document.body?o():jr.attachEvent("load",o)}Ir(Lr,Nr),Lr.enabled=function(){return Ar.enabled()},Lr.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var Pr=Lr,Ur=L.EventEmitter,Mr=R.exports,Wr=A,Dr=$t,Br=It,Fr=Lt,qr=vr,Jr=Pr,Gr=_r;function zr(t,e){var n=this;Ur.call(this),setTimeout((function(){n.doXhr(t,e)}),0)}Mr(zr,Ur),zr._getReceiver=function(t,e,n){return n.sameOrigin?new Gr(e,Fr):Br.enabled?new Gr(e,Br):Dr.enabled&&n.sameScheme?new Gr(e,Dr):Jr.enabled()?new Jr(t,e):new Gr(e,qr)},zr.prototype.doXhr=function(t,e){var n=this,r=Wr.addPath(t,"/info");this.xo=zr._getReceiver(t,r,e),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),zr.timeout),this.xo.once("finish",(function(t,e){n._cleanup(!0),n.emit("finish",t,e)}))},zr.prototype._cleanup=function(t){clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},zr.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},zr.timeout=8e3;var Hr,Vr,Qr,Xr,$r=zr;function Kr(){if(Xr)return Qr;Xr=1;var t=A,e=n.exports,r=function(){if(Vr)return Hr;Vr=1;var t=xe();function e(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(e,n){t.postMessage("c",JSON.stringify([e,n]))},e.prototype._transportMessage=function(e){t.postMessage("t",e)},e.prototype._send=function(t){this._transport.send(t)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},Hr=e}(),o=kr,i=xe(),s=sr;return Qr=function(n,a){var c,u={};a.forEach((function(t){t.facadeTransport&&(u[t.facadeTransport.transportName]=t.facadeTransport)})),u[o.transportName]=o,n.bootstrap_iframe=function(){var o;i.currentWindowId=s.hash.slice(1);e.attachEvent("message",(function(e){if(e.source===parent&&(void 0===c&&(c=e.origin),e.origin===c)){var a;try{a=JSON.parse(e.data)}catch(Po){return void e.data}if(a.windowId===i.currentWindowId)switch(a.type){case"s":var l;try{l=JSON.parse(a.data)}catch(Po){a.data;break}var h=l[0],p=l[1],f=l[2],d=l[3];if(h!==n.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+n.version+'".');if(!t.isOriginEqual(f,s.href)||!t.isOriginEqual(d,s.href))throw new Error("Can't connect to different domain from within an iframe. ("+s.href+", "+f+", "+d+")");o=new r(new u[p](f,d));break;case"m":o._send(a.data);break;case"c":o&&o._close(),o=null}}})),i.postMessage("s")}},Qr}var Zr,Yr=I,to=R.exports,eo=l,no=er,ro=A,oo=n.exports,io=function(t){return{filterToEnabled:function(e,n){var r={main:[],facade:[]};return e?"string"==typeof e&&(e=[e]):e=[],t.forEach((function(t){t&&("websocket"===t.transportName&&!1===n.websocket||(e.length&&-1===e.indexOf(t.transportName)?t.transportName:t.enabled(n)?(t.transportName,r.main.push(t),t.facadeTransport&&r.facade.push(t.facadeTransport)):t.transportName))})),r}}},so=je,ao=Pt,co=rr,uo=ir,lo=U,ho=sr,po=lr,fo=dr,mo=$r;function bo(t,e,n){if(!(this instanceof bo))return new bo(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");lo.call(this),this.readyState=bo.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&co.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return eo.string(r)}}this._server=n.server||eo.numberString(1e3);var o=new Yr(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var i="https:"===o.protocol;if("https:"===ho.protocol&&!i&&!ro.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var s=e.sort();s.forEach((function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<s.length-1&&t===s[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")}));var a=ro.getOrigin(ho.href);this._origin=a?a.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!ao.hasDomain(),sameOrigin:ro.isOriginEqual(this.url,ho.href),sameScheme:ro.isSchemeEqual(this.url,ho.href)},this._ir=new mo(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function vo(t){return 1e3===t||t>=3e3&&t<=4999}to(bo,lo),bo.prototype.close=function(t,e){if(t&&!vo(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==bo.CLOSING&&this.readyState!==bo.CLOSED){this._close(t||1e3,e||"Normal closure",!0)}},bo.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===bo.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===bo.OPEN&&this._transport.send(no.quote(t))},bo.version=ge(),bo.CONNECTING=0,bo.OPEN=1,bo.CLOSING=2,bo.CLOSED=3,bo.prototype._receiveInfo=function(t,e){if(this._ir=null,t){this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=so.extend(t,this._urlInfo);var n=Zr.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},bo.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(t.transportName,t.needBody&&(!r.document.body||void 0!==r.document.readyState&&"complete"!==r.document.readyState&&"interactive"!==r.document.readyState))return this._transports.unshift(t),void oo.attachEvent("load",this._connect.bind(this));var e=Math.max(this._timeout,this._rto*t.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e);var n=ro.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[t.transportName],i=new t(n,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=t.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},bo.prototype._transportTimeout=function(){this.readyState===bo.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},bo.prototype._transportMessage=function(t){var e,n=this,r=t.slice(0,1),o=t.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new uo("heartbeat")),void this.transport}if(o)try{e=JSON.parse(o)}catch(i){}if(void 0!==e)switch(r){case"a":Array.isArray(e)&&e.forEach((function(t){n.transport,n.dispatchEvent(new fo(t))}));break;case"m":this.transport,this.dispatchEvent(new fo(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},bo.prototype._transportClose=function(t,e){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),vo(t)||2e3===t||this.readyState!==bo.CONNECTING?this._close(t,e):this._connect()},bo.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===bo.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=bo.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new uo("open")),this.transport):this._close(1006,"Server lost session")},bo.prototype._close=function(t,e,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===bo.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=bo.CLOSING,setTimeout(function(){this.readyState=bo.CLOSED,r&&this.dispatchEvent(new uo("error"));var o=new po;o.wasClean=n||!1,o.code=t||1e3,o.reason=e,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},bo.prototype.countRTO=function(t){return t>100?4*t:300+t};var go,yo=(Zr=io(go=In),Kr()(bo,go),bo);"_sockjs_onload"in r&&setTimeout(r._sockjs_onload,1);var wo={exports:{}},xo={};!function(t){(function(){var e,n,r,o,i={}.hasOwnProperty,s=[].slice;e={LF:"\n",NULL:"\0"},r=function(){var t;function n(t,e,n){this.command=t,this.headers=null!=e?e:{},this.body=null!=n?n:""}return n.prototype.toString=function(){var t,r,o,s,a;for(r in t=[this.command],(o=!1===this.headers["content-length"])&&delete this.headers["content-length"],a=this.headers)i.call(a,r)&&(s=a[r],t.push(r+":"+s));return this.body&&!o&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(t){return t?encodeURI(t).match(/%..|./g).length:0},t=function(t){var r,o,i,s,a,c,u,l,h,p,f,d,m,b,v,g,y;for(s=t.search(RegExp(""+e.LF+e.LF)),i=(a=t.substring(0,s).split(e.LF)).shift(),c={},d=function(t){return t.replace(/^\s+|\s+$/g,"")},m=0,v=(g=a.reverse()).length;m<v;m++)l=(p=g[m]).indexOf(":"),c[d(p.substring(0,l))]=d(p.substring(l+1));if(r="",f=s+2,c["content-length"])h=parseInt(c["content-length"]),r=(""+t).substring(f,f+h);else for(o=null,u=b=f,y=t.length;(f<=y?b<y:b>y)&&(o=t.charAt(u))!==e.NULL;u=f<=y?++b:--b)r+=o;return new n(i,c,r)},n.unmarshall=function(n){var r;return function(){var o,i,s,a;for(a=[],o=0,i=(s=n.split(RegExp(""+e.NULL+e.LF+"*"))).length;o<i;o++)(null!=(r=s[o])?r.length:void 0)>0&&a.push(t(r));return a}()},n.marshall=function(t,r,o){return new n(t,r,o).toString()+e.NULL},n}(),n=function(){var t;function n(t){this.ws=t,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return n.prototype.debug=function(t){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.console)?e.log(t):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(t,e,n){var o;for(o=r.marshall(t,e,n),"function"==typeof this.debug&&this.debug(">>> "+o);;){if(!(o.length>this.maxWebSocketFrameSize))return this.ws.send(o);this.ws.send(o.substring(0,this.maxWebSocketFrameSize)),o=o.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+o.length)}},n.prototype._setupHeartbeat=function(n){var r,i,s,a,c,u,l;if((c=n.version)===o.VERSIONS.V1_1||c===o.VERSIONS.V1_2)return i=(u=function(){var t,e,r,o;for(o=[],t=0,e=(r=n["heart-beat"].split(",")).length;t<e;t++)a=r[t],o.push(parseInt(a));return o}())[0],r=u[1],0!==this.heartbeat.outgoing&&0!==r&&(s=Math.max(this.heartbeat.outgoing,r),"function"==typeof this.debug&&this.debug("send PING every "+s+"ms"),this.pinger=o.setInterval(s,(l=this,function(){return l.ws.send(e.LF),"function"==typeof l.debug?l.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==i?(s=Math.max(this.heartbeat.incoming,i),"function"==typeof this.debug&&this.debug("check PONG every "+s+"ms"),this.ponger=o.setInterval(s,function(e){return function(){var n;if((n=t()-e.serverActivity)>2*s)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var t,e,n,r;switch(r={},(t=1<=arguments.length?s.call(arguments,0):[]).length){case 2:r=t[0],e=t[1];break;case 3:t[1]instanceof Function?(r=t[0],e=t[1],n=t[2]):(r.login=t[0],r.passcode=t[1],e=t[2]);break;case 4:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3];break;default:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3],r.host=t[4]}return[r,e,n]},n.prototype.connect=function(){var n,i,a,c,u;return n=1<=arguments.length?s.call(arguments,0):[],c=this._parseConnect.apply(this,n),a=c[0],this.connectCallback=c[1],i=c[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(u=this,function(n){var o,s,a,c,l,h,p,f,d,m,b,v;if(c="undefined"!=typeof ArrayBuffer&&n.data instanceof ArrayBuffer?(o=new Uint8Array(n.data),"function"==typeof u.debug&&u.debug("--- got data length: "+o.length),function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)s=o[t],n.push(String.fromCharCode(s));return n}().join("")):n.data,u.serverActivity=t(),c!==e.LF){for("function"==typeof u.debug&&u.debug("<<< "+c),v=[],d=0,m=(b=r.unmarshall(c)).length;d<m;d++)switch((l=b[d]).command){case"CONNECTED":"function"==typeof u.debug&&u.debug("connected to server "+l.headers.server),u.connected=!0,u._setupHeartbeat(l.headers),v.push("function"==typeof u.connectCallback?u.connectCallback(l):void 0);break;case"MESSAGE":f=l.headers.subscription,(p=u.subscriptions[f]||u.onreceive)?(a=u,h=l.headers["message-id"],l.ack=function(t){return null==t&&(t={}),a.ack(h,f,t)},l.nack=function(t){return null==t&&(t={}),a.nack(h,f,t)},v.push(p(l))):v.push("function"==typeof u.debug?u.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":v.push("function"==typeof u.onreceipt?u.onreceipt(l):void 0);break;case"ERROR":v.push("function"==typeof i?i(l):void 0);break;default:v.push("function"==typeof u.debug?u.debug("Unhandled frame: "+l):void 0)}return v}"function"==typeof u.debug&&u.debug("<<< PONG")}),this.ws.onclose=function(t){return function(){var e;return e="Whoops! Lost connection to "+t.ws.url,"function"==typeof t.debug&&t.debug(e),t._cleanUp(),"function"==typeof i?i(e):void 0}}(this),this.ws.onopen=function(t){return function(){return"function"==typeof t.debug&&t.debug("Web Socket Opened..."),a["accept-version"]=o.VERSIONS.supportedVersions(),a["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(","),t._transmit("CONNECT",a)}}(this)},n.prototype.disconnect=function(t,e){return null==e&&(e={}),this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof t?t():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},n.prototype.send=function(t,e,n){return null==e&&(e={}),null==n&&(n=""),e.destination=t,this._transmit("SEND",e,n)},n.prototype.subscribe=function(t,e,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(t){return delete this.subscriptions[t],this._transmit("UNSUBSCRIBE",{id:t})},n.prototype.begin=function(t){var e,n;return n=t||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),e=this,{id:n,commit:function(){return e.commit(n)},abort:function(){return e.abort(n)}}},n.prototype.commit=function(t){return this._transmit("COMMIT",{transaction:t})},n.prototype.abort=function(t){return this._transmit("ABORT",{transaction:t})},n.prototype.ack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("ACK",n)},n.prototype.nack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("NACK",n)},n}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(t,e){var r;return null==e&&(e=["v10.stomp","v11.stomp"]),r=new(o.WebSocketClass||WebSocket)(t,e),new n(r)},over:function(t){return new n(t)},Frame:r},null!==t&&(t.Stomp=o),"undefined"!=typeof window&&null!==window?(o.setInterval=function(t,e){return window.setInterval(e,t)},o.clearInterval=function(t){return window.clearInterval(t)},window.Stomp=o):t||(self.Stomp=o)}).call(r)}(xo);var _o,Eo,So={},Oo=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),Co=o(Oo);var To,ko,No,Io,jo={_args:[["websocket@1.0.35","F:\\GitHub\\bruce-cxm-douyin\\douyin_vue2"]],_from:"websocket@latest",_id:"websocket@1.0.35",_inBundle:!1,_integrity:"sha512-/REy6amwPZl44DDzvRCkaI1q1bIiQB0mEFQLUrhz3z2EK91cp3n72rAjUlrTP0zV22HJIUOVHQGPxhFRjxjt+Q==",_location:"/websocket",_optional:!0,_phantomChildren:{ms:"2.0.0"},_requested:{type:"tag",registry:!0,raw:"websocket@latest",name:"websocket",escapedName:"websocket",rawSpec:"latest",saveSpec:null,fetchSpec:"latest"},_requiredBy:["/stompjs"],_resolved:"https://registry.npmmirror.com/websocket/-/websocket-1.0.35.tgz",_shasum:"374197207d7d4cc4c36cbf8a1bb886ee52a07885",_spec:"websocket@latest",_where:"F:\\GitHub\\bruce-cxm-douyin\\douyin_vue2\\node_modules\\stompjs",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=4.0.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",test:"tape test/unit/*.js"},version:"1.0.35"};function Ao(){if(Io)return No;var e;if(Io=1,"object"===("undefined"==typeof globalThis?"undefined":t(globalThis)))e=globalThis;else try{e=function(){if(Eo)return _o;Eo=1;var e=function(){if("object"===("undefined"==typeof self?"undefined":t(self))&&self)return self;if("object"===("undefined"==typeof window?"undefined":t(window))&&window)return window;throw new Error("Unable to resolve global `this`")};return _o=function(){if(this)return this;if("object"===("undefined"==typeof globalThis?"undefined":t(globalThis))&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()}()}catch(i){}finally{if(e||"undefined"==typeof window||(e=window),!e)throw new Error("Could not determine global this")}var n=e.WebSocket||e.MozWebSocket,r=ko?To:(ko=1,To=jo.version);function o(t,e){return e?new n(t,e):new n(t)}return n&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(o,t,{get:function(){return n[t]}})})),No={w3cwebsocket:n?o:null,version:r}}(function(){var t,e,n,r,o,i;e=Co,(t=xo).Stomp.setInterval=function(t,e){return setInterval(e,t)},t.Stomp.clearInterval=function(t){return clearInterval(t)},o=function(t,n){var r,o;return r=null,o={url:"tcp:// "+n+":"+t,send:function(t){return r.write(t)},close:function(){return r.end()}},(r=e.connect(t,n,(function(t){return o.onopen()}))).on("error",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),r.on("close",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),r.on("data",(function(t){var e;return e={data:t.toString()},o.onmessage(e)})),o},i=function(t){var e,n,r,o;return e=Ao().client,n=null,o={url:t,send:function(t){return n.sendUTF(t)},close:function(){return n.close()}},(r=new e).on("connect",(function(t){return n=t,o.onopen(),n.on("error",(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),n.on("close",(function(){return"function"==typeof o.onclose?o.onclose():void 0})),n.on("message",(function(t){var e;if("utf8"===t.type)return e={data:t.utf8Data},o.onmessage(e)}))})),r.connect(t),o},n=function(e,n){var r;return r=o(n,e),t.Stomp.over(r)},r=function(e){var n;return n=i(e),t.Stomp.over(n)},So.overTCP=n,So.overWS=r}).call(r);var Ro=xo,Lo=So;wo.exports=Ro.Stomp,wo.exports.overTCP=Lo.overTCP,wo.exports.overWS=Lo.overWS;e("default",i({data:function(){return{friendId:null,stompClient:null,username:"",message:"",messages:[]}},created:function(){this.friendId=this.$route.params.id},mounted:function(){this.connect()},methods:{connect:function(){var t=this,e=new yo("http://localhost:9998/chat");this.stompClient=wo.exports.over(e),s(),this.stompClient.connect({},(function(e){console.log("Connected: "+e);var n=t.friendId;t.stompClient.subscribe("/topic/chat/".concat(11,"/").concat(n),(function(e){t.showMessage(JSON.parse(e.body))})),t.stompClient.subscribe("/topic/chat/".concat(n,"/").concat(11),(function(e){t.showMessage(JSON.parse(e.body))})),t.stompClient.send("/app/chat.addUser/".concat(11,"/").concat(n),{},JSON.stringify({sender:11,type:"JOIN",friendId:n}))}),(function(t){console.error("Error connecting to WebSocket:",t)}))},sendMessage:function(){var t=this.message.trim();if(t&&this.stompClient){var e={sender:this.username,content:t,type:"CHAT"};this.stompClient.send("/app/chat.sendMessage/".concat(userId,"/").concat(friendId),{},JSON.stringify(e)),this.message=""}},showMessage:function(t){this.messages.push(t)},formatMessage:function(t){return"JOIN"===t.type?"".concat(t.sender," joined the chat"):"CHAT"===t.type?"".concat(t.sender,": ").concat(t.content):""}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat-container"},[t._m(0),e("div",{staticClass:"chat-box"},[e("ul",{attrs:{id:"chat"}},t._l(t.messages,(function(n,r){return e("li",{key:r,class:["chat-message","JOIN"===n.type?"join-message":n.sender===t.username?"user-message":"friend-message"]},[t._v(" "+t._s(t.formatMessage(n))+" ")])})),0)]),e("div",{staticClass:"message-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input-field",attrs:{placeholder:"Type a message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),e("button",{staticClass:"send-btn",on:{click:t.sendMessage}},[t._v("Send")])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"header"},[t("h3",[this._v("Chat")])])}],!1,null,"b5cf9f5b",null,null).exports)}}}))}();
